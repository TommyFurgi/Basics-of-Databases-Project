<!DOCTYPE html>
<html>
<head>
<title>Projekt.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<p><strong><p align="center">Bazy Danych: Projekt</p></strong></p>
<p><strong><p align="center">Raport</p></strong></p>
<p><strong><p align="center">Zespół 5: Furgała Tomasz, Łukasz Kluza, Mateusz Sacha</p></strong></p>
<ol>
<li>Administrator</li>
</ol>
<ul>
<li>Usuwanie webinaru, administrator może usunąć dostępne nagranie webinaru gdy uzna to za stosowne.</li>
<li>Zarządzanie użytkownikami, administrator ma możliwość edycji kont innych użytkowników.</li>
<li>Generowanie raportów, administrator generuję raporty zawierająca aktualne statystki.</li>
</ul>
<ol start="2">
<li>Gość</li>
</ol>
<ul>
<li>Założenie konta, użytkownik może założyć konto, które umożliwia mu korzystanie z systemu</li>
<li>Przeglądanie kursów, użytkownik ma możliwość zapoznania się z aktualną ofertą kursów i szkoleń.</li>
</ul>
<ol start="3">
<li>Zalogowany użytkownik</li>
</ol>
<ul>
<li>Zapis na webinar, kurs lub studia, użytkownik może zapisać się na wybraną przez siebie usługę.</li>
<li>Płatność za usługi, dokonuje opłaty by móc wziąć udział w webinarze, kursie lub studiach oraz wykupuje późniejszy dostęp do materiałów.</li>
<li>Przeglądanie listy, możliwość przeglądania listy usług, na które dany użytkownik jest zapisany.</li>
<li>Odbiera dyplom, użytkownik może odebrać dyplom, gdy zostanie on wystawiony przez administratora.</li>
</ul>
<ol start="4">
<li>Koordynator</li>
</ol>
<ul>
<li>Odraczanie płatności, dyrektor szkoły ma możliwość odroczenia płatności na określony czas.</li>
<li>Wgląd do kursów oraz webinarów, dyrektor ma możliwość wglądu do danych o kursach i webinarach prowadzonych przez jego pracowników</li>
<li>Zatwierdzanie programu studiów, dyrektor ma dostęp do ułożonych przez pracowników sylabusów przed opublikowaniem ich oraz możliwość zatwierdzania i wprowadzania poprawek do nich</li>
<li>Zatwierdzanie nowych kursów i webinarów, dyrektor zatwierdza bądź odrzuca każdy nowy kurs, webinar, stworzony przez jego pracowników</li>
</ul>
<ol start="5">
<li>Menadżer</li>
</ol>
<ul>
<li>Zarządzaniem limitem miejsc, menadżer ustala maksymalną liczbę osób która może uczestniczyć w danym webinarze, szkoleniu</li>
<li>Wystawianie dyplomów, menadżer wystawia dyplom użytkownikowi, który spełnił wszystkie regulaminowe przesłanki co to do tego.</li>
<li>Zarządzanie ofertą, menadżer ma możliwość edycji obecnej oferty jak i możliwość dodawania nowych kursów, szkoleń.</li>
</ul>
<ol start="6">
<li>Prowadzący/Wykładowca</li>
</ol>
<ul>
<li>Dostęp do swoich webinarów, każdy prowadzący ma nielimitowany czasowo dostęp do nagrań wszystkich swoich webinarów</li>
<li>Możliwość edycji modułów kursu, prowadzący mają możliwość wprowadzania poprawek oraz modyfikacji materiałów znajdujących się na prowadzonych przez siebie kursach</li>
<li>Dostęp do systemu ocen i obecności, prowadzący ma dostęp do systemu, w którym może swobodnie zapisywać oraz zmieniać oceny i obecności uczestników jego kursów</li>
<li>Ułożenie sylabusu, prowadzący musi ułożyć sylabus do każdego z prowadzonych przez siebie przedmiotów w określonym terminie przed rozpoczęciem studiów</li>
</ul>
<ol start="7">
<li>System</li>
</ol>
<ul>
<li>Generowanie linków do płatności, system sam, automatycznie generuje link do płatności, gdy użytkownik chce opłacić zamówienie.</li>
<li>Wysyłanie powiadomień, uczestnik spotkania dostaje powiadomienia, gdy rozpoczyna się spotkanie, w którym ma uczestniczyć.</li>
<li>Powiadomienie o zapłacie, użytkownik do dostaje przypomnienie o konieczności zapłaty tydzień przed ostatecznym terminem dokonania płatności, dotyczy to także zaliczek.</li>
</ul>
<p><strong>Diagram bazy danych:</strong></p>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/diagram.png" alt="Schemat">
</p>
<p><strong>Tabele:</strong></p>
<ol>
<li>Offers:</li>
</ol>
<p>Tabela zawiera informacje o wszystkich wydarzeniach jakie są oferowane. Zawiera idetyfikator wydarzenia (OfferID), nazwe, opis oraz typ (Name, Description, Type), typ określa czy jest to webinar, kurs, studia czy pojedyńcza lekcja. Dodatkowo miejsce wydarzenia oraz jego całkowity koszt (Place, Price).</p>
<br>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Offers](
	[OfferID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Name</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Type</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">15</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Description] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">50</span>) <span class="hljs-literal">NULL</span>,
	[Place] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Price] [money] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[DiscountToStudents] [<span class="hljs-built_in">float</span>] <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Offers] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[OfferID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Offers] <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [DF_DiscountToStudents]  <span class="hljs-keyword">DEFAULT</span> ((<span class="hljs-number">0.10</span>)) <span class="hljs-keyword">FOR</span> [DiscountToStudents]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Offers]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_DiscountToStudentsForGathering] <span class="hljs-keyword">CHECK</span>  (([<span class="hljs-keyword">Type</span>]&lt;&gt;<span class="hljs-string">'Gathering'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'Gathering'</span> <span class="hljs-keyword">AND</span> ([DiscountToStudents] <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">OR</span> [DiscountToStudents]&gt;=(<span class="hljs-number">0</span>) <span class="hljs-keyword">AND</span> [DiscountToStudents]&lt;=(<span class="hljs-number">1</span>))))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Offers] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_DiscountToStudentsForGathering]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Offers]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_PricePrecision] <span class="hljs-keyword">CHECK</span>  (([Price]&gt;=(<span class="hljs-number">0</span>) <span class="hljs-keyword">AND</span> <span class="hljs-keyword">round</span>([Price],(<span class="hljs-number">2</span>))=[Price]))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Offers] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_PricePrecision]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Offers]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Type_Values] <span class="hljs-keyword">CHECK</span>  (([<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'Gathering'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'Studies'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'Courses'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'Webinar'</span>))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Offers] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Type_Values]
</div></code></pre>
<ol start="2">
<li>Webinar:</li>
</ol>
<p>Tabela zawiera informacje o webianrach, zawiera klucz główny (WebinarID), nazwę oraz datę rozpoczęcia (WebinarName, Date), inforamcje o osbie, która to prowadzi (TeacherID) i link do webinaru (MeetingLink).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Webinar](
	[WebinarID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[WebinarName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-built_in">Date</span>] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[TeacherID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[MeetingLink] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">30</span>) <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Webinar] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[WebinarID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Webinar]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Webinar_Offers] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([WebinarID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Offers] ([OfferID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Webinar] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Webinar_Offers]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Webinar]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Webinar_TeachingStaff] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([TeacherID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[TeachingStaff] ([TeacherID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Webinar] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Webinar_TeachingStaff]
</div></code></pre>
<ol start="3">
<li>Studies:</li>
</ol>
<p>Tabela zawiera informacje o studiach, zawiera klucz główny (StudiesID), kierunku studiów oraz opłacie za nie (Name, Fee), koorynatorze, maksymalnej ilości studentów na danym studium (MEnagerID, StudentCapacity).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Studies](
	[StudiesID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Name</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Fee] [money] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[MenagerID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[StudentCapacity] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Studies_1] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[StudiesID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]S

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Studies]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Studies_Employees] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([MenagerID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Employees] ([EmployeeID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Studies] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Studies_Employees]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Studies]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Studies_Offers] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudiesID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Offers] ([OfferID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Studies] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Studies_Offers]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Studies]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Fee_NonNegative] <span class="hljs-keyword">CHECK</span>  (([Fee]&gt;=(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Studies] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Fee_NonNegative]
</div></code></pre>
<ol start="4">
<li>Courses:</li>
</ol>
<p>Tabela zawiera spis wszystkich kursów z kluczem głównym (CourseID), posiada informację o temacie kursu oraz jego nazwie (TopicID, CourseName), a także dacie rozpoczęcia, ilości modułów z których kurs się składa i dacie zapłaty (StartDate, ModulesNo, PaymentDay), całkowitej kwocie jaką należy za kurs zapłacić, kwocie zaliczki oraz zniżce (FullPrice, Deposit, Discount).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses](
	[CourseID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[TopicID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[CourseName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[StartDate] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[ModulesNo] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[PaymentDay] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[FullPrice] [money] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Deposit] [money] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Discount] [<span class="hljs-built_in">float</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Courses] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[CourseID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Courses_Offers] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([CourseID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Offers] ([OfferID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Courses_Offers]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Courses_Topics] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([TopicID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Topics] ([TopicID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Courses_Topics]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Deposit_Range] <span class="hljs-keyword">CHECK</span>  (([Deposit]&gt;=(<span class="hljs-number">0</span>) <span class="hljs-keyword">AND</span> [Deposit]&lt;=[FullPrice]))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Deposit_Range]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Discount_Range] <span class="hljs-keyword">CHECK</span>  (([Discount]&gt;=(<span class="hljs-number">0</span>) <span class="hljs-keyword">AND</span> [Discount]&lt;=(<span class="hljs-number">1</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Discount_Range]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_FullPrice_NonNegative] <span class="hljs-keyword">CHECK</span>  (([FullPrice]&gt;=(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_FullPrice_NonNegative]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_ModulesNo_Positive] <span class="hljs-keyword">CHECK</span>  (([ModulesNo]&gt;(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_ModulesNo_Positive]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_PaymentDay_BeforeStart] <span class="hljs-keyword">CHECK</span>  (([PaymentDay]&lt;=<span class="hljs-keyword">dateadd</span>(<span class="hljs-keyword">day</span>,(<span class="hljs-number">-3</span>),[StartDate])))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Courses] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_PaymentDay_BeforeStart]
</div></code></pre>
<ol start="5">
<li>Gatherings:</li>
</ol>
<p>Tabela zawiera informacje o zjazdach, posaida klucz główny (GatheringID) i semestr, w ramach którego odbywa się dany zjazd oraz datę w której zjazd się odbywa (SemestrID, Date).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Gatherings](
    [GatheringID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Semester] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-built_in">Date</span>] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Gatherings] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[GatheringID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Gatherings]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Gatherings_Offers] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([GatheringID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Offers] ([OfferID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Gatherings] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Gatherings_Offers]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Gatherings]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Gatherings_Semesters] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([Semester])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Semesters] ([SemesterID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Gatherings] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Gatherings_Semesters]
</div></code></pre>
<ol start="6">
<li>Semesters:</li>
</ol>
<p>W tabeli znajdują się informacje o wszystkich semestrach na wszystkich kierunkach studiów, klucz główny to (SemesterID), zawiera też informacje o kierunku studiów na którym semestr się znajduje, numerze semestru(StudiesID, Semester_no).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Semesters](
	[SemesterID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[StudiesID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Semester_no] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Semesters] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[SemesterID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Semesters]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Semesters_Studies] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudiesID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Studies] ([StudiesID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Semesters] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Semesters_Studies]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Semesters]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Semester_no_Positive] <span class="hljs-keyword">CHECK</span>  (([Semester_no]&gt;(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Semesters] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Semester_no_Positive]
</div></code></pre>
<ol start="7">
<li>Practices:</li>
</ol>
<p>Tabela zawiera dane o praktykach, posiada klucz główny (PractiseID), semestrze na którym się odbywają i pracowniku, który je prowadzi (SemesterID, EmployeeID), posiada informacje o miejscu, w kótrym praktyki się odbywają, dacie rozpoczęcia, ilości spotkań oraz potrzebnym wyposażeniu (Address, StartDate, MeetingsCount, RequiredEquipment).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Practices](
    [PractiseID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[SemesterID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[EmployeeID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Address] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">40</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[StartDate] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[MeetingsCount] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[RequiredEquipment] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Practices] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[PractiseID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Practices]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Practices_Semesters] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([SemesterID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Semesters] ([SemesterID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Practices] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Practices_Semesters]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Practices]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Practices_TeachingStaff] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([EmployeeID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[TeachingStaff] ([TeacherID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Practices] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Practices_TeachingStaff]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Practices]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_MeetingsCount_Positive] <span class="hljs-keyword">CHECK</span>  (([MeetingsCount]&gt;(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Practices] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_MeetingsCount_Positive]
</div></code></pre>
<ol start="8">
<li>PractiseAttendance:</li>
</ol>
<p>Tabela posiada informacje o obecności studentów na praktykach, posiada klucz główny (PractiseAttendanceID), dla każdego studenta przypisuje czy był obecny na danych praktykach, na które jest zapisany (PractiseID, StudentID, Attendance).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[PractiseAttendance](
	[PractiseAttendanceID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[PractiseID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[StudentID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Attendance] [<span class="hljs-built_in">bit</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_PractiseAttendance] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[PractiseAttendanceID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[PractiseAttendance]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_PractiseAttendance_Lessons] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudentID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Lessons] ([LessonID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[PractiseAttendance] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_PractiseAttendance_Lessons]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[PractiseAttendance]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_PractiseAttendance_Practices] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([PractiseID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Practices] ([PractiseID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[PractiseAttendance] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_PractiseAttendance_Practices]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[PractiseAttendance]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_PractiseAttendance_Students] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudentID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Students] ([StudentID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[PractiseAttendance] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_PractiseAttendance_Students]
</div></code></pre>
<ol start="9">
<li>Subjects:</li>
</ol>
<p>Tabela zawiera informacje o przedmiotach występujących w semestrach z kluczem głównym (SubjectID), przypisuje przemiot do określonego semestru, posiada nazwę przedmiotu oraz jego opis (SemesterID, SubjectName, Description).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Subjects](
	[SubjectID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[SemesterID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[SubjectName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Description] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">70</span>) <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Subjects] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[SubjectID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Subjects]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Subjects_Semesters] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([SemesterID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Semesters] ([SemesterID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Subjects] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Subjects_Semesters]
</div></code></pre>
<ol start="10">
<li>Lessons:</li>
</ol>
<p>Tabela zawiera informacje o lekcjach zarówno tych na studiach, oraz tych możliwych do kupienia pojedynczo, posida klucz główny (LessonID), przedmiot i zjazd do którego jest przypisana dana lekcja, oraz nauczyciela który ją prowadzi (SubjectID, GatheringID, TeacherID) zawiera temat, datę, typ, język prowadzenia, cenę i czas trwania (TopicID, Date, Type, Language, Price, Duration).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons](
	[LessonID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[SubjectID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[GatheringID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[TeacherID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[TopicID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-built_in">Date</span>] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Type</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Language</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Price] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Duration</span>] [<span class="hljs-built_in">time</span>](<span class="hljs-number">7</span>) <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Lessons] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[LessonID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Lessons_Gatherings] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([GatheringID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Gatherings] ([GatheringID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Lessons_Gatherings]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Lessons_Subjects] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([SubjectID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Subjects] ([SubjectID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Lessons_Subjects]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Lessons_TeachingStaff] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([TeacherID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[TeachingStaff] ([TeacherID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Lessons_TeachingStaff]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Lessons_Topics] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([TopicID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Topics] ([TopicID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Lessons_Topics]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Lessons_Type] <span class="hljs-keyword">CHECK</span>  (([<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'online'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'hybrid'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'stationary'</span>))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Lessons] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Lessons_Type]
</div></code></pre>
<ol start="11">
<li>LessonsAttendance:</li>
</ol>
<p>Tabela posiada informacje o obecności studentów na lekcjach, posiada klucz główny (LessonsAttendenseID), dla każdego studenta przypisuje czy był obecny na danej lekcji, na którą jest zapisany (LessonID, StudentID, Attendance).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[LessonsAttendance](
	[LessonsAttendenseID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[LessonID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[StudentID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Attendance] [<span class="hljs-built_in">bit</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_LessonsAttendance] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[LessonsAttendenseID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[LessonsAttendance]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_LessonsAttendance_Lessons] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([LessonID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Lessons] ([LessonID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[LessonsAttendance] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_LessonsAttendance_Lessons]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[LessonsAttendance]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_LessonsAttendance_Students] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudentID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Students] ([StudentID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[LessonsAttendance] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_LessonsAttendance_Students]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[LessonsAttendance]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_LessonsAttendance_Students1] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudentID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Students] ([StudentID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[LessonsAttendance] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_LessonsAttendance_Students1]
</div></code></pre>
<ol start="12">
<li>Topics:</li>
</ol>
<p>Tabela posiada dane o tematach kursów, bądź lekcji, posiada klucz główny (TopicID) oraz nazwę tematu i jego opis (TopicName, Description).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Topics](
    [TopicID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[TopicName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Description] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">70</span>) <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Topics] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[TopicID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]
</div></code></pre>
<ol start="13">
<li>Modules:</li>
</ol>
<p>Tabela zawiera wszystkie moduły, znajdujące się kursach, posiada klucz główny (ModuleID), informacje o kursie, do którego moduł należy oraz jego tytule i typie (CourseID, Title, Type), a także dacie zakończenia i rozpoczęcia oraz klasie, w której się odbywa (EndDate, StartDate, Classroom).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules](
	[ModuleID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[CourseID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Title] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Type</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[EndDate] [datetime] <span class="hljs-literal">NULL</span>,
	[StartDate] [datetime] <span class="hljs-literal">NULL</span>,
	[Classroom] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">10</span>) <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Modules] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[ModuleID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Modules_Courses] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([CourseID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Courses] ([CourseID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Modules_Courses]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Modules_Date_Order] <span class="hljs-keyword">CHECK</span>  (([EndDate]&gt;[StartDate]))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Modules_Date_Order]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Modules_Type_Values] <span class="hljs-keyword">CHECK</span>  (([<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'online'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'hybrid'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'stationary'</span>))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Modules_Type_Values]
</div></code></pre>
<ol start="14">
<li>Meetings:</li>
</ol>
<p>Tabela zawiera dane o spotkaniach odbywających się w ramach konkretnego modułu, posiada klucz główny (MeetingID), przypisuje spotkanie do modułu, zawiera datę odbycia się i język prowadzenia oraz typ (ModuleID, Date, LanguageID, Type), miejsce odbywania się modułu, link do ewentualnego spotlania online, nauczyciela prowadzącego i tłumacza (Place, Link, TeacherID, TranslatorID).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings](
	[MeetingID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[ModuleID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[LanguageID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-built_in">Date</span>] [<span class="hljs-built_in">date</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Type</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Place] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">10</span>) <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Link</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">30</span>) <span class="hljs-literal">NULL</span>,
	[TeacherID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[TranslatorID] [<span class="hljs-built_in">int</span>] <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Meetings] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[MeetingID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Meetings_Modules] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([ModuleID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Modules] ([ModuleID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Meetings_Modules]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Meetings_TeachingStaff] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([TeacherID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[TeachingStaff] ([TeacherID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Meetings_TeachingStaff]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Meetings_Translators] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([TranslatorID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Translators] ([TranslatorID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Meetings_Translators]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Meetings_Type_Values] <span class="hljs-keyword">CHECK</span>  (([<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'online'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'hybrid'</span> <span class="hljs-keyword">OR</span> [<span class="hljs-keyword">Type</span>]=<span class="hljs-string">'stationary'</span>))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Meetings_Type_Values]
</div></code></pre>
<ol start="15">
<li>CourseAttendace:</li>
</ol>
<p>Tabela posiada informacje o obecności studentów na spotkaniach w donym module kursu, posiada klucz główny (AttendanceID), dla każdego studenta przypisuje czy był obecny na danym spotkaniu, na które jest zapisany (MeetingID, StudentID, Attendance).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[CourseAttendance](
	[AttendanceID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[MeetingID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[StudentID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Attendance] [<span class="hljs-built_in">bit</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Attendance] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[AttendanceID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[CourseAttendance]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Attendance_Meetings] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([MeetingID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Meetings] ([MeetingID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[CourseAttendance] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Attendance_Meetings]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[CourseAttendance]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Attendance_Students] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudentID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Students] ([StudentID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[CourseAttendance] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Attendance_Students]
</div></code></pre>
<ol start="16">
<li>Orders:</li>
</ol>
<p>Tabela przypisuje zamówienie do określonego studenta, posiada klucz główny (OrderID), studenta, do którego należy zamówienie, datę jego złożenia (StudentID, OrderDate).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Orders](
    [OrderID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[StudentID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[OrderDate] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Cart] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[OrderID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Orders]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Orders_Students] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudentID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Students] ([StudentID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Orders] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Orders_Students]
</div></code></pre>
<ol start="17">
<li>Order_Details:</li>
</ol>
<p>Tabela zawiera szczegółowe informacje o konkretnym zamówieniu, posiada klucz główny (OrderDetailsID), przypisuje ofertę do złożonego zamówienia, który się w nim znajdu (OrderID, OfferID), wartość produktu i zniżke(Value, Discount), zniażka jest wartoscia typu float z zakresu od 0 do 1.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details](
    [OrderDetailsID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[OrderID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[OfferID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Value</span>] [money] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Discount] [<span class="hljs-built_in">float</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Cart_details] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[OrderDetailsID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Cart_details_Cart] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([OrderID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Orders] ([OrderID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Cart_details_Cart]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Order_details_Offers] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([OfferID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Offers] ([OfferID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Order_details_Offers]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_OrderDetails_Discount_Range] <span class="hljs-keyword">CHECK</span>  (([Discount]&gt;=(<span class="hljs-number">0</span>) <span class="hljs-keyword">AND</span> [Discount]&lt;=(<span class="hljs-number">1</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_OrderDetails_Discount_Range]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_OrderDetails_Value_NonNegative] <span class="hljs-keyword">CHECK</span>  (([<span class="hljs-keyword">Value</span>]&gt;=(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Order_details] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_OrderDetails_Value_NonNegative]
</div></code></pre>
<ol start="18">
<li>Payments:</li>
</ol>
<p>Tabela zawiera dane o płatnościach, posiada klucz główny (PaymentID), łączy płatność z określonym zamówieniem(OrderID), zawiera datę, wartość oraz status płatności (Date, Value, IsCancelled), status jest typu bit.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Payments](
	[PaymentID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[OrderID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-built_in">Date</span>] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Value</span>] [money] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[IsCancelled] [<span class="hljs-built_in">bit</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Payments] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[PaymentID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Payments]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Payments_Cart] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([OrderID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Orders] ([OrderID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Payments] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Payments_Cart]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Payments]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Payments_Value_Positive] <span class="hljs-keyword">CHECK</span>  (([<span class="hljs-keyword">Value</span>]&gt;(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Payments] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Payments_Value_Positive]
</div></code></pre>
<ol start="19">
<li>Users:</li>
</ol>
<p>Tabela zawiera wszystkich użytkowników z całej bazy danych, posiada klucz główny (UserID), do tego dla każdego użytkownika przypisuje login i hasło (Login, Password).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[<span class="hljs-keyword">Users</span>](
	[UserID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Login] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[<span class="hljs-keyword">Password</span>] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Users] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[UserID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY],
 <span class="hljs-keyword">CONSTRAINT</span> [UQ_Users_Login] <span class="hljs-keyword">UNIQUE</span> NONCLUSTERED 
(
	[Login] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[<span class="hljs-keyword">Users</span>]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Users_Login_Length] <span class="hljs-keyword">CHECK</span>  ((<span class="hljs-keyword">len</span>([Login])&gt;=(<span class="hljs-number">5</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[<span class="hljs-keyword">Users</span>] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Users_Login_Length]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[<span class="hljs-keyword">Users</span>]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Users_Password_Length] <span class="hljs-keyword">CHECK</span>  ((<span class="hljs-keyword">len</span>([<span class="hljs-keyword">Password</span>])&gt;=(<span class="hljs-number">8</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[<span class="hljs-keyword">Users</span>] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Users_Password_Length]
</div></code></pre>
<ol start="20">
<li>Students:</li>
</ol>
<p>Tabela posiada wszystkch zarejestrowanych studentów, zawiera klucz główny (StudentID). Przechowuje informacje o studentach takie jak: imię, nazwisko, datę urodzenia (FirstName, LastName, BirthDate), z jakiego kraju pochodzi i dane adresowe (CountryID, Country, Region, City, ZipCode, Street), numer prywatnego i domowego telefonu (Phone, HomeNumber).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Students](
	[StudentID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[FirstName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[LastName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[BirthDate] [<span class="hljs-built_in">date</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[CountryID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Region] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[City] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[ZipCode] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Street] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Phone] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[HomeNumber] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">15</span>) <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Students] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[StudentID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Students]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Students_Countries] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([CountryID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Countries] ([CountryID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Students] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Students_Countries]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Students]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Students_Users] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([StudentID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[<span class="hljs-keyword">Users</span>] ([UserID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Students] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Students_Users]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Students]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Students_BirthDate] <span class="hljs-keyword">CHECK</span>  (([BirthDate]&lt;=<span class="hljs-keyword">getdate</span>()))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Students] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Students_BirthDate]
</div></code></pre>
<ol start="21">
<li>Employees:</li>
</ol>
<p>Tabela zawiera o wszystkich pracownikach, posiada klucz główny (EmployeeID) oraz inforamcaje o pracowniku takie jak: pozycję, imię, nazwisko (PositionID, FirstName, LastName), datę zatrudnienia, pensje, email, numer telefonu oraz miasto (HireDate, Salary, Email, Phone, City), dodatkowo informację czy dany pracownik wciąż dla nas pracuje(IsActive).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees](
    [EmployeeID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[PositionID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[FirstName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[LastName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[HireDate] [<span class="hljs-built_in">date</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Salary] [money] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Email] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Phone] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">15</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[City] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[IsActive] [<span class="hljs-built_in">bit</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Employees] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[EmployeeID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY],
 <span class="hljs-keyword">CONSTRAINT</span> [UQ_Employees_Email] <span class="hljs-keyword">UNIQUE</span> NONCLUSTERED 
(
	[Email] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Employees_Position] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([PositionID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Positions] ([PositionID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Employees_Position]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Employees_Users] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([EmployeeID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[<span class="hljs-keyword">Users</span>] ([UserID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Employees_Users]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Employees_Email_Format] <span class="hljs-keyword">CHECK</span>  ((<span class="hljs-keyword">charindex</span>(<span class="hljs-string">'@'</span>,[Email])&gt;(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Employees_Email_Format]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Employees_Salary] <span class="hljs-keyword">CHECK</span>  (([Salary]&gt;(<span class="hljs-number">0</span>)))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Employees] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Employees_Salary]

</div></code></pre>
<ol start="22">
<li>TeachingStaff:</li>
</ol>
<p>Tabela zawiera inforamacje o kadrze nauczycielskiej, posiada klucz główny (TeacherID) oraz informajce o tym w jakim języku prowadzi zajęcia i jego stopień naukowy (LanguageID, Degree).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[TeachingStaff](
	[TeacherID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[LanguageID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Degree] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_TeachingStaff] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[TeacherID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[TeachingStaff]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_TeachingStaff_Employees] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([TeacherID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Employees] ([EmployeeID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[TeachingStaff] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_TeachingStaff_Employees]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[TeachingStaff]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CK_TeachingStaff_Degree] <span class="hljs-keyword">CHECK</span>  (([Degree]=<span class="hljs-string">'professor'</span> <span class="hljs-keyword">OR</span> [Degree]=<span class="hljs-string">'doctor'</span> <span class="hljs-keyword">OR</span> [Degree]=<span class="hljs-string">'master'</span> <span class="hljs-keyword">OR</span> [Degree]=<span class="hljs-string">'bachelor'</span> <span class="hljs-keyword">OR</span> [Degree]=<span class="hljs-string">'none'</span>))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[TeachingStaff] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CK_TeachingStaff_Degree]
</div></code></pre>
<ol start="23">
<li>Translators:</li>
</ol>
<p>Tabela zawiera inforamacje o tłumaczach, posiada klucz główny (TranslatorID) oraz informacje o języku z którego tłumaczy (LanguageID).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Translators](
	[TranslatorID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[LanguageID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Translators] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[TranslatorID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Translators]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Translators_Employees] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([TranslatorID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Employees] ([EmployeeID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Translators] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Translators_Employees]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Translators]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Translators_Languages] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([LanguageID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Languages] ([LanguageID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Translators] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Translators_Languages]
</div></code></pre>
<ol start="24">
<li>Administrators:</li>
</ol>
<p>Tabela zawiera inforamacja o admnistarotach zawiera klucz głowny (AdminID) oraz data otrzymania uprawnień (Add_date).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Administrators](
	[AdminID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[Add_date] [datetime] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Administrators_1] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[AdminID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Administrators]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Administrators_Employees] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([AdminID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Employees] ([EmployeeID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Administrators] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Administrators_Employees]
</div></code></pre>
<ol start="25">
<li>Countries:</li>
</ol>
<p>Tabela zawiera informacje o krajach, posiada klucz główny (CountryID), nazwę kraju i język (CountryName, LanguageID).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Countries](
	[CountryID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[CountryName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[LanguageID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Countries2] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[CountryID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Countries]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [FK_Countries_Languages] <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>([LanguageID])
<span class="hljs-keyword">REFERENCES</span> [dbo].[Languages] ([LanguageID])

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Countries] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [FK_Countries_Languages]
</div></code></pre>
<ol start="26">
<li>Languages:</li>
</ol>
<p>Tabela zawiera informacje o językach, posiada klucz główny (LanguageID) oraz nazwę języka (LanguageName).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Languages](
	[LanguageID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[LanguageName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Languages] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[LanguageID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]
</div></code></pre>
<ol start="27">
<li>Position</li>
</ol>
<p>Tabela zawiera informacje o stanowiskach, posiada klucz główny (PositionID) oraz nazwę stanowski w postaci znakowej (PositionName).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [dbo].[Positions](
	[PositionID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
	[PositionName] [<span class="hljs-keyword">nchar</span>](<span class="hljs-number">15</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
 <span class="hljs-keyword">CONSTRAINT</span> [PK_Position] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
(
	[PositionID] <span class="hljs-keyword">ASC</span>
)<span class="hljs-keyword">WITH</span> (PAD_INDEX = <span class="hljs-keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword">ON</span>, OPTIMIZE_FOR_SEQUENTIAL_KEY = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [PRIMARY]
) <span class="hljs-keyword">ON</span> [PRIMARY]

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Positions]  <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">ADD</span>  <span class="hljs-keyword">CONSTRAINT</span> [CHK_Positions_PositionName] <span class="hljs-keyword">CHECK</span>  (([PositionName]=<span class="hljs-string">'director'</span> <span class="hljs-keyword">OR</span> [PositionName]=<span class="hljs-string">'administrator'</span> <span class="hljs-keyword">OR</span> [PositionName]=<span class="hljs-string">'educator'</span> <span class="hljs-keyword">OR</span> [PositionName]=<span class="hljs-string">'menager'</span>))

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Positions] <span class="hljs-keyword">CHECK</span> <span class="hljs-keyword">CONSTRAINT</span> [CHK_Positions_PositionName]
</div></code></pre>
<p><strong>Widoki:</strong></p>
<ol>
<li>AttendanceMeetingView</li>
</ol>
<p>Widok przedstawiający obecność studentów na spotkaniach. Dla każdego kursu podaje sumę obecności, łączną liczbę spotkań oraz procentową obecność. Umożliwia analizę uczestnictwa studentów w ramach konkretnych kursów i modułów.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[AttendanceMeetingView] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> 
    c.CourseID, 
    c.CourseName, 
    a.StudentID, 
    s.FirstName, 
    s.LastName,
    m.ModuleID, 
    m.Title, 
    <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">CAST</span>(a.Attendance <span class="hljs-keyword">AS</span> <span class="hljs-built_in">INT</span>)) <span class="hljs-keyword">AS</span> Attendance, 
    <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">CAST</span>(a.Attendance <span class="hljs-keyword">AS</span> <span class="hljs-built_in">INT</span>) * <span class="hljs-number">100</span>) <span class="hljs-keyword">AS</span> AllMeeting, 
    <span class="hljs-keyword">AVG</span>(<span class="hljs-keyword">CAST</span>(a.Attendance <span class="hljs-keyword">AS</span> <span class="hljs-built_in">INT</span>) * <span class="hljs-number">100</span>) <span class="hljs-keyword">AS</span> AttendancePercentage
<span class="hljs-keyword">FROM</span> dbo.Courses <span class="hljs-keyword">AS</span> c 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Modules <span class="hljs-keyword">AS</span> m <span class="hljs-keyword">ON</span> m.CourseID = c.CourseID 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Meetings <span class="hljs-keyword">AS</span> me <span class="hljs-keyword">ON</span> me.ModuleID = m.ModuleID 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.CourseAttendance <span class="hljs-keyword">AS</span> a <span class="hljs-keyword">ON</span> a.MeetingID = me.MeetingID <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Students <span class="hljs-keyword">AS</span> s <span class="hljs-keyword">ON</span> a.StudentID = s.StudentID
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> c.CourseID, c.CourseName, a.StudentID, s.FirstName, s.LastName, m.ModuleID, m.Title
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/AttendanceMeetingView.png" alt="AttendanceMeetingView">
</p>
<ol start="2">
<li>CoursesPass</li>
</ol>
<p>Widok ten identyfikuje, czy studenci zaliczyli kurs na podstawie procentowej obecności w poszczególnych modułach. Dla każdego kursu podaje procentową obecność, łączną liczbę modułów oraz status &quot;Pass&quot; lub &quot;Fail&quot; w zależności od spełnienia warunku procentowej obecności (80% lub więcej). Umożliwia monitorowanie postępów studentów i ocenę ich osiągnięć w kontekście kursów.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[CoursesPass] <span class="hljs-keyword">As</span>
<span class="hljs-keyword">SELECT</span> 
    amv.CourseID, 
    amv.CourseName, 
    amv.StudentID, 
    s.FirstName, 
    s.LastName, 
    <span class="hljs-keyword">COUNT</span>(amv.ModuleID) * <span class="hljs-number">100</span> / c.ModulesNo <span class="hljs-keyword">AS</span> AttendancePercentage, 
    c.ModulesNo, 
    <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> ((<span class="hljs-keyword">COUNT</span>(amv.ModuleID) * <span class="hljs-number">100</span>) / c.odulesNo) &gt;= <span class="hljs-number">80</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'Pass'</span> <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'Fail'</span> <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Result</span>
<span class="hljs-keyword">FROM</span> dbo.AttendanceMeetingView <span class="hljs-keyword">AS</span> amv 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Courses <span class="hljs-keyword">AS</span> c <span class="hljs-keyword">ON</span> amv.CourseID = c.CourseID 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Students <span class="hljs-keyword">AS</span> s <span class="hljs-keyword">ON</span> amv.StudentID = s.StudentID
<span class="hljs-keyword">WHERE</span> amv.AttendancePercentage = <span class="hljs-number">100</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> amv.CourseID, amv.CourseName, amv.StudentID, s.FirstName, s.LastName, c.ModulesNo
</div></code></pre>
<!-- TRZEBA ZDJĘCIE ZMIENIĆ!!! -->
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/CoursesPass.png" alt="CoursesPass">
</p>
<ol start="3">
<li>ConflictingTranslatorMeetings</li>
</ol>
<p>Widok [ConflictingTranslatorMeetings] identyfikuje konfliktowe spotkania tłumaczy, prezentując informacje o dwóch spotkaniach o różnych identyfikatorach (ModuleID1 i ModuleID2), które mają tę samą datę (MeetingDate) oraz dotyczą tego samego tłumacza (PersonID). Dodatkowo, widok dostarcza imię (FirstName) i nazwisko (LastName) tłumacza za pomocą danych pobranych z tabeli pracowników (Employees).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[ConflictingTranslatorMeetings] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> 
    M1.ModuleID <span class="hljs-keyword">AS</span> ModuleID1, 
    M2.ModuleID <span class="hljs-keyword">AS</span> ModuleID2, 
    M1.Date <span class="hljs-keyword">AS</span> MeetingDate, 
    M1.TranslatorID <span class="hljs-keyword">AS</span> PersonID, 
    T.FirstName, 
    T.LastName
<span class="hljs-keyword">FROM</span> 
    Meetings M1
<span class="hljs-keyword">JOIN</span> 
    Meetings M2 <span class="hljs-keyword">ON</span> M1.TranslatorID = M2.TranslatorID
<span class="hljs-keyword">JOIN</span> 
    Employees T <span class="hljs-keyword">ON</span> M1.TranslatorID = T.EmployeeID
<span class="hljs-keyword">WHERE</span> 
    M1.MeetingID &lt;&gt; M2.MeetingID 
    <span class="hljs-keyword">AND</span> M1.Date = M2.Date  
    <span class="hljs-keyword">AND</span> M1.MeetingID &lt; M2.MeetingID 
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/ConflictingTranslatorMeetings.png" alt="ConflictingTranslatorMeetings">
</p>
<ol start="4">
<li>CourseProfitView</li>
</ol>
<p>Widok ten zawiera informacje o studentach zapisanych na kursy, prezentując identyfikator studenta (StudentID), imię (FirstName) i nazwisko (LastName) studenta, identyfikator kursu (CourseID), nazwę kursu (CourseName), opis kursu (CourseDescription), miejsce kursu (CoursePlace), oraz datę rozpoczęcia kursu (StartDate).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[CourseProfitView] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
	c.CourseID,
    c.CourseName,
	<span class="hljs-keyword">ISNULL</span>((
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(od.OrderDetailsID)
        <span class="hljs-keyword">FROM</span> Order_details od
        <span class="hljs-keyword">WHERE</span> od.OfferID = c.CourseID
    ), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> Students_number,
    <span class="hljs-keyword">ISNULL</span>((
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">SUM</span>(od.Value)
        <span class="hljs-keyword">FROM</span> Order_details od
        <span class="hljs-keyword">WHERE</span> od.OrderID <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> p.OrderID <span class="hljs-keyword">FROM</span> Payments p)
        <span class="hljs-keyword">AND</span> od.OfferID = c.CourseID
    ), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> Profit,
	c.ModulesNo,
	<span class="hljs-keyword">FORMAT</span>(C.StartDate, <span class="hljs-string">'dd-MM-yyyy'</span>) <span class="hljs-keyword">AS</span> StartDate
<span class="hljs-keyword">FROM</span>
    Courses c
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/CourseProfitView.png" alt="ConflictingTranslatorMeetings">
</p>
<ol start="5">
<li>EnrolledStudentsToCourses</li>
</ol>
<p>Widok przedstawia informacje o studentach zapisanych na kursy. Zawiera identyfikator studenta (StudentID), imię (FirstName) i nazwisko (LastName) studenta, identyfikator kursu (CourseID), nazwę kursu (CourseName), opis kursu (CourseDescription), miejsce kursu (CoursePlace), oraz datę rozpoczęcia kursu (StartDate).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[EnrolledStudentsToCourses] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> 
    S.StudentID, 
    S.FirstName, 
    S.LastName, 
    O.OfferID <span class="hljs-keyword">AS</span> CourseID, 
    O.Name <span class="hljs-keyword">AS</span> CourseName, 
    O.Description <span class="hljs-keyword">AS</span> CourseDescription, 
    O.Place <span class="hljs-keyword">AS</span> CoursePlace,
    <span class="hljs-keyword">FORMAT</span>(C.StartDate, <span class="hljs-string">'dd-MM-yyyy'</span>) <span class="hljs-keyword">AS</span> StartDate
<span class="hljs-keyword">FROM</span> dbo.Students <span class="hljs-keyword">AS</span> S 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Orders <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Ord</span> <span class="hljs-keyword">ON</span> S.StudentID = Ord.StudentID 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Order_details <span class="hljs-keyword">AS</span> Od <span class="hljs-keyword">ON</span> Ord.OrderID = Od.OrderID 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Offers <span class="hljs-keyword">AS</span> O <span class="hljs-keyword">ON</span> Od.OfferID = O.OfferID 
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Courses <span class="hljs-keyword">AS</span> C <span class="hljs-keyword">ON</span> O.OfferID = C.CourseID
<span class="hljs-keyword">WHERE</span>  (O.Type = <span class="hljs-string">'Courses'</span>)
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/EnrolledStudentsToCourses.png" alt="EnrolledStudentsToCourses">
</p>
<ol start="6">
<li>EnrolledStudentsToGatherings</li>
</ol>
<p>Widok [EnrolledStudentsToGatherings] dostarcza informacje o studentach zapisanych na spotkania. Prezentuje identyfikator studenta (StudentID), imię (FirstName) i nazwisko (LastName) studenta, identyfikator spotkania (GatheringID), nazwę spotkania (GatheringName), opis spotkania (GatheringDescription), miejsce spotkania (GatheringPlace), oraz datę spotkania (Date).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[EnrolledStudentsToGatherings] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
    S.StudentID,
    S.FirstName,
    S.LastName,
    O.OfferID <span class="hljs-keyword">AS</span> GatheringID,
    O.Name <span class="hljs-keyword">AS</span> GatheringName,
    O.Description <span class="hljs-keyword">AS</span> GatheringDescription,
    O.Place <span class="hljs-keyword">AS</span> GatheringPlace,
    <span class="hljs-keyword">FORMAT</span>(G.Date, <span class="hljs-string">'dd-MM-yyyy'</span>) <span class="hljs-keyword">AS</span> <span class="hljs-built_in">Date</span>
<span class="hljs-keyword">FROM</span>
    dbo.Students S
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Orders <span class="hljs-keyword">Ord</span> <span class="hljs-keyword">ON</span> S.StudentID = Ord.StudentID
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Order_details Od <span class="hljs-keyword">ON</span> Ord.OrderID = Od.OrderID
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Offers O <span class="hljs-keyword">ON</span> Od.OfferID = O.OfferID
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Gatherings G <span class="hljs-keyword">ON</span> O.OfferID = G.GatheringID
<span class="hljs-keyword">WHERE</span>
    O.Type = <span class="hljs-string">'Gathering'</span>;
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/EnrolledStudentsToGatherings.png" alt="EnrolledStudentsToGatherings">
</p>
<ol start="7">
<li>EnrolledStudentsToStudies</li>
</ol>
<p>Widok dostarcza informacje o studentach zapisanych na studia. Prezentuje identyfikator studenta (StudentID), imię (FirstName) i nazwisko (LastName) studenta, identyfikator studiów (StudiesID), nazwę oferty studiów (OfferName), opis oferty studiów (OfferDescription), miejsce oferty studiów (OfferPlace), oraz datę rozpoczęcia studiów (StartDate).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[EnrolledStudentsToStudies] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
    S.StudentID,
    S.FirstName,
    S.LastName,
    St.StudiesID,
	O.Name <span class="hljs-keyword">AS</span> OfferName, 
	O.Description <span class="hljs-keyword">AS</span> OfferDescription, 
	O.Place <span class="hljs-keyword">AS</span> OfferPlace,
    <span class="hljs-keyword">MIN</span>(G.[<span class="hljs-built_in">Date</span>]) <span class="hljs-keyword">AS</span> StartDate
<span class="hljs-keyword">FROM</span>
    dbo.Students S
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> dbo.Orders <span class="hljs-keyword">Ord</span> <span class="hljs-keyword">ON</span> S.StudentID = Ord.StudentID
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> dbo.Order_details Od <span class="hljs-keyword">ON</span> Ord.OrderID = Od.OrderID
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> dbo.Offers O <span class="hljs-keyword">ON</span> Od.OfferID = O.OfferID
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> dbo.Studies St <span class="hljs-keyword">ON</span> O.OfferID = St.StudiesID
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> dbo.Semesters Sem <span class="hljs-keyword">ON</span> St.StudiesID = Sem.StudiesID
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> dbo.Gatherings G <span class="hljs-keyword">ON</span> Sem.SemesterID = G.SemesterID
<span class="hljs-keyword">WHERE</span>
    O.Type = <span class="hljs-string">'Studies'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> S.StudentID, S.FirstName, S.LastName, St.StudiesID, O.OfferID, O.Name, O.Description, O.Place;
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/EnrolledStudentsToStudies.png" alt="EnrolledStudentsToStudies">
</p>
<ol start="8">
<li>EnrolledStudentsToWebinars</li>
</ol>
<p>Widok dostarcza informacje o studentach zapisanych na webinary. Prezentuje identyfikator studenta (StudentID), imię (FirstName) i nazwisko (LastName) studenta, identyfikator webinaru (WebinarID), nazwę spotkania (GatheringName), opis spotkania (GatheringDescription), miejsce spotkania (GatheringPlace), oraz datę webinaru (Date). Zastosowanie tego widoku ułatwia monitorowanie uczestnictwa studentów w webinarach, umożliwiając identyfikację zapisanych osób oraz szczegółowe informacje o danym wydarzeniu edukacyjnym.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[EnrolledStudentsToWebinars] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
    S.StudentID,
    S.FirstName,
    S.LastName,
    O.OfferID <span class="hljs-keyword">AS</span> WebinarID,
    O.Name <span class="hljs-keyword">AS</span> GatheringName,
    O.Description <span class="hljs-keyword">AS</span> GatheringDescription,
    O.Place <span class="hljs-keyword">AS</span> GatheringPlace,
    W.[<span class="hljs-built_in">Date</span>]
<span class="hljs-keyword">FROM</span>
    dbo.Students S
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Orders <span class="hljs-keyword">Ord</span> <span class="hljs-keyword">ON</span> S.StudentID = Ord.StudentID
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Order_details Od <span class="hljs-keyword">ON</span> Ord.OrderID = Od.OrderID
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Offers O <span class="hljs-keyword">ON</span> Od.OfferID = O.OfferID
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> dbo.Webinar W <span class="hljs-keyword">ON</span> O.OfferID = W.WebinarID
<span class="hljs-keyword">WHERE</span>
    O.Type = <span class="hljs-string">'Webinar'</span>;
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/EnrolledStudentsToWebinars.png" alt="EnrolledStudentsToWebinars">
</p>
<ol start="9">
<li>ListOfDebtors</li>
</ol>
<p>Widok [ListOfDebtors] przedstawia szczegółowe informacje o osobach, które wzięły udział w różnych wydarzeniach, ale jeszcze nie uregulowały swoich płatności, pozostając w stanie zadłużenia. Zidentyfikowani dłużnicy są grupowani według identyfikatora studenta (StudentID) oraz oferty (OfferID), a informacje obejmują imię i nazwisko studenta (Student_name), identyfikator oferty (OfferID), nazwę oferty (Name) oraz kwotę zadłużenia (Debt). Widok uwzględnia różne rodzaje wydarzeń, takie jak spotkania (Gatherings), kursy (Courses), webinary (Webinar) oraz studia (Studies).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">WITH</span> t <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> 
        o.OrderID,
        <span class="hljs-keyword">CASE</span> 
            <span class="hljs-keyword">WHEN</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Payments <span class="hljs-keyword">as</span> p <span class="hljs-keyword">WHERE</span> o.OrderID = p.OrderID <span class="hljs-keyword">AND</span> p.CancelDate <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">THEN</span> <span class="hljs-number">1</span>
            <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> OrderStatus
    <span class="hljs-keyword">FROM</span> 
        Orders <span class="hljs-keyword">as</span> o
)

<span class="hljs-keyword">SELECT</span> 
	s.StudentID,
	<span class="hljs-keyword">TRIM</span>(s.FirstName) + <span class="hljs-string">' '</span> + <span class="hljs-keyword">TRIM</span>(s.LastName) <span class="hljs-keyword">AS</span> Student_name,
	o.OfferID,
	o.Name,
	<span class="hljs-keyword">FORMAT</span>((d.Value*(<span class="hljs-number">1</span>-d.Discount)-P.Value), <span class="hljs-string">'0.00'</span>) <span class="hljs-keyword">AS</span> Debt
<span class="hljs-keyword">FROM</span> 
	Gatherings <span class="hljs-keyword">as</span> g
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Offers <span class="hljs-keyword">as</span> o <span class="hljs-keyword">ON</span> g.GatheringID = o.OfferID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Order_details <span class="hljs-keyword">as</span> d <span class="hljs-keyword">ON</span> d.OfferID = o.OfferID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	t <span class="hljs-keyword">ON</span> t.OrderID = d.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Orders <span class="hljs-keyword">as</span> r <span class="hljs-keyword">ON</span> r.OrderID = d.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Students <span class="hljs-keyword">as</span> s <span class="hljs-keyword">ON</span> s.StudentID = r.StudentID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
    Payments <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">ON</span> r.OrderID = P.OrderID
<span class="hljs-keyword">WHERE</span> 
	t.OrderStatus = <span class="hljs-number">0</span> <span class="hljs-keyword">AND</span> g.Date &lt; <span class="hljs-keyword">GETDATE</span>()

<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
    s.StudentID, s.FirstName, s.LastName, o.OfferID, o.Name, P.Value, d.Value, d.Discount

<span class="hljs-keyword">UNION</span> 

<span class="hljs-keyword">SELECT</span> 
	s.StudentID,
	<span class="hljs-keyword">TRIM</span>(s.FirstName) + <span class="hljs-string">' '</span> + <span class="hljs-keyword">TRIM</span>(s.LastName) <span class="hljs-keyword">AS</span> Student_name,
	o.OfferID,
	o.Name,
	<span class="hljs-keyword">FORMAT</span>((d.Value*(<span class="hljs-number">1</span>-d.Discount)-P.Value), <span class="hljs-string">'0.00'</span>) <span class="hljs-keyword">AS</span> Debt
<span class="hljs-keyword">FROM</span> 
	Courses <span class="hljs-keyword">as</span> c
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Offers <span class="hljs-keyword">as</span> o <span class="hljs-keyword">ON</span> c.CourseID = o.OfferID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Order_details <span class="hljs-keyword">as</span> d <span class="hljs-keyword">ON</span> d.OfferID = o.OfferID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	t <span class="hljs-keyword">ON</span> t.OrderID = d.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Orders <span class="hljs-keyword">as</span> r <span class="hljs-keyword">ON</span> r.OrderID = d.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Students <span class="hljs-keyword">as</span> s <span class="hljs-keyword">ON</span> s.StudentID = r.StudentID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
    Payments <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">ON</span> r.OrderID = P.OrderID
<span class="hljs-keyword">WHERE</span> 
	t.OrderStatus = <span class="hljs-number">0</span> <span class="hljs-keyword">AND</span> c.StartDate &lt; <span class="hljs-keyword">GETDATE</span>()
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
    s.StudentID, s.FirstName, s.LastName, o.OfferID, o.Name, P.Value, d.Value, d.Discount

<span class="hljs-keyword">UNION</span>

<span class="hljs-keyword">SELECT</span> 
	s.StudentID,
	<span class="hljs-keyword">TRIM</span>(s.FirstName) + <span class="hljs-string">' '</span> + <span class="hljs-keyword">TRIM</span>(s.LastName) <span class="hljs-keyword">AS</span> Student_name,
	o.OfferID,
	o.Name,
	<span class="hljs-keyword">FORMAT</span>((d.Value*(<span class="hljs-number">1</span>-d.Discount)-P.Value), <span class="hljs-string">'0.00'</span>) <span class="hljs-keyword">AS</span> Debt
<span class="hljs-keyword">FROM</span> 
	Webinar <span class="hljs-keyword">as</span> w
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Offers <span class="hljs-keyword">as</span> o <span class="hljs-keyword">ON</span> w.WebinarID = o.OfferID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Order_details <span class="hljs-keyword">as</span> d <span class="hljs-keyword">ON</span> d.OfferID = o.OfferID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	t <span class="hljs-keyword">ON</span> t.OrderID = d.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Orders <span class="hljs-keyword">as</span> r <span class="hljs-keyword">ON</span> r.OrderID = d.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Students <span class="hljs-keyword">as</span> s <span class="hljs-keyword">ON</span> s.StudentID = r.StudentID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
    Payments <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">ON</span> r.OrderID = P.OrderID
<span class="hljs-keyword">WHERE</span> 
	t.OrderStatus = <span class="hljs-number">0</span> <span class="hljs-keyword">AND</span> w.Date &lt; <span class="hljs-keyword">GETDATE</span>()
	<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
    s.StudentID, s.FirstName, s.LastName, o.OfferID, o.Name, P.Value, d.Value, d.Discount

<span class="hljs-keyword">UNION</span>

<span class="hljs-keyword">SELECT</span> 
	s.StudentID,
	<span class="hljs-keyword">TRIM</span>(s.FirstName) + <span class="hljs-string">' '</span> + <span class="hljs-keyword">TRIM</span>(s.LastName) <span class="hljs-keyword">AS</span> Student_name,
	o.OfferID,
	o.Name,
	<span class="hljs-keyword">FORMAT</span>((d.Value*(<span class="hljs-number">1</span>-d.Discount)-P.Value), <span class="hljs-string">'0.00'</span>) <span class="hljs-keyword">AS</span> Debt
<span class="hljs-keyword">FROM</span> 
	Studies <span class="hljs-keyword">as</span> sd
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Offers <span class="hljs-keyword">as</span> o <span class="hljs-keyword">ON</span> sd.StudiesID = o.OfferID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Semesters <span class="hljs-keyword">as</span> se <span class="hljs-keyword">ON</span> se.StudiesID=sd.StudiesID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Gatherings <span class="hljs-keyword">as</span> g <span class="hljs-keyword">ON</span> g.SemesterID = se.SemesterID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Order_details <span class="hljs-keyword">as</span> d <span class="hljs-keyword">ON</span> d.OfferID = o.OfferID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	t <span class="hljs-keyword">ON</span> t.OrderID = d.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Orders <span class="hljs-keyword">as</span> r <span class="hljs-keyword">ON</span> r.OrderID = d.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Students <span class="hljs-keyword">as</span> s <span class="hljs-keyword">ON</span> s.StudentID = r.StudentID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
    Payments <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">ON</span> r.OrderID = P.OrderID
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
    s.StudentID, s.FirstName, s.LastName, o.OfferID, o.Name, P.Value, t.OrderStatus, d.Value, d.Discount
<span class="hljs-keyword">HAVING</span> <span class="hljs-keyword">min</span>(g.Date) &lt; <span class="hljs-keyword">GETDATE</span>() <span class="hljs-keyword">AND</span> t.OrderStatus = <span class="hljs-number">0</span>;
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/ListOfDebtors.png" alt="ListOfDebtors">
</p>
<ol start="10">
<li>OrdersPaymentsView</li>
</ol>
<p>Widok [OrdersPaymentsView] dostarcza kompleksowych informacji na temat płatności związanych z zamówieniami. Prezentuje identyfikator zamówienia (OrderID), łączną wartość zamówienia (Value), opłaconą kwotę (Paid), kwotę do zapłaty (ToPay), datę anulowania płatności (CancelDate), datę zamówienia (OrderDate), identyfikator studenta (StudentID), oraz imię i nazwisko osoby składającej zamówienie (Orderer_name).</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[OrdersPaymentsView] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> 
    Ord.OrderID, 
    <span class="hljs-keyword">FORMAT</span>(<span class="hljs-keyword">SUM</span>(OD.Value*(<span class="hljs-number">1</span>-OD.Discount)), <span class="hljs-string">'0.00'</span>) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Value</span>, 
    <span class="hljs-keyword">FORMAT</span>(P.Value, <span class="hljs-string">'0.00'</span>) <span class="hljs-keyword">AS</span> Paid, 
    <span class="hljs-keyword">FORMAT</span>(
        <span class="hljs-keyword">IIF</span>(P.CancelDate <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-number">0.00</span>, <span class="hljs-keyword">SUM</span>(OD.Value*(<span class="hljs-number">1</span>-OD.Discount))-P.Value), <span class="hljs-string">'0.00'</span>
    ) <span class="hljs-keyword">AS</span> ToPay, 
    P.CancelDate,
	<span class="hljs-keyword">FORMAT</span>(OrderDate, <span class="hljs-string">'dd-MM-yyyy'</span>) <span class="hljs-keyword">AS</span> OrderDate,
	ord.StudentID,
	<span class="hljs-keyword">TRIM</span>(FirstName) + <span class="hljs-string">' '</span> + <span class="hljs-keyword">TRIM</span>(LastName) <span class="hljs-keyword">AS</span> Orderer_name
<span class="hljs-keyword">FROM</span> 
    Orders <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Ord</span>
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
    Order_details <span class="hljs-keyword">AS</span> OD <span class="hljs-keyword">ON</span> Ord.OrderID = OD.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
    Payments <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">ON</span> Ord.OrderID = P.OrderID
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
	Students <span class="hljs-keyword">AS</span> s <span class="hljs-keyword">ON</span> s.StudentID = ord.StudentID
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
    Ord.OrderID, P.CancelDate, P.Value, OrderDate, ord.StudentID, FirstName, LastName
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/OrdersPaymentsView.png" alt="OrdersPaymentsView">
</p>
<ol start="11">
<li>ProfitInfo</li>
</ol>
<p>Widok analizuje zamówienia dla ofert, grupując je według identyfikatora oferty (OfferID), typu oferty (Type), daty zamówienia (OrderDate), identyfikatora studenta (StudentID), oraz imienia i nazwiska zamawiającego (Orderer_name). Dla każdej grupy prezentuje liczbę wszystkich zamówień (AllOrders) oraz całkowity zysk (Profit). Dodatkowo pokazuje date dokonania zamówienia i dane osoby je składającej.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[ProfitInfo] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> 
	Order_details.OfferID, 
	<span class="hljs-keyword">Type</span>, 
	<span class="hljs-keyword">COUNT</span>(Order_details.OrderID) <span class="hljs-keyword">AS</span> AllOrders, 
	<span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">Value</span>) <span class="hljs-keyword">AS</span> Profit,
	<span class="hljs-keyword">FORMAT</span>(OrderDate, <span class="hljs-string">'dd-MM-yyyy'</span>) <span class="hljs-keyword">AS</span> OrderDate,
	Orders.StudentID,
	<span class="hljs-keyword">TRIM</span>(FirstName) + <span class="hljs-string">' '</span> + <span class="hljs-keyword">TRIM</span>(LastName) <span class="hljs-keyword">AS</span> Orderer_name
<span class="hljs-keyword">FROM</span> dbo.Order_details
<span class="hljs-keyword">JOIN</span> Offers <span class="hljs-keyword">ON</span> Offers.OfferID = Order_details.OfferID
<span class="hljs-keyword">JOIN</span> Orders <span class="hljs-keyword">ON</span> Orders.OrderID = Order_details.OrderID
<span class="hljs-keyword">JOIN</span> Students <span class="hljs-keyword">ON</span> Students.StudentID = Orders.StudentID
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> Order_details.OfferID, <span class="hljs-keyword">Type</span>, OrderDate, Orders.StudentID, FirstName, LastName
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/ProfitInfo.png" alt="ProfitInfo">
</p>
<ol start="12">
<li>StudentPracticesCompletionStatus</li>
</ol>
<p>Widok analizuje podsumowanie praktyk studenckich, korzystając z tymczasowej tabeli (PracticeCounts), aby określić liczbę wszystkich praktyk dla każdego studenta. Główne zapytanie prezentuje identyfikator studenta, imię, nazwisko, liczbę ukończonych praktyk, łączną liczbę praktyk, wynik (Pass/Fail) w zależności od tego, czy student ukończył wszystkie praktyki, oraz średnią frekwencję.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[StudentPracticesCompletionStatus] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">WITH</span> PracticeCounts <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> 
        in_t.StudentID,
        <span class="hljs-keyword">COUNT</span>(in_t.PractiseID) <span class="hljs-keyword">AS</span> TotalPracticesCount
    <span class="hljs-keyword">FROM</span> 
        StudentPracticesSummaryByPractiseID in_t 
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
        in_t.StudentID
)

<span class="hljs-keyword">SELECT</span> 
    out_t.StudentID, 
    out_t.FirstName, 
    out_t.LastName, 
    <span class="hljs-keyword">COUNT</span>(out_t.PractiseID) <span class="hljs-keyword">AS</span> CompletedPracticesCount,
    PracticeCounts.TotalPracticesCount,
    <span class="hljs-keyword">CASE</span> 
        <span class="hljs-keyword">WHEN</span> <span class="hljs-keyword">COUNT</span>(out_t.PractiseID) = PracticeCounts.TotalPracticesCount
            <span class="hljs-keyword">THEN</span> <span class="hljs-string">'Pass'</span>
        <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'Fail'</span>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Result</span>,
    <span class="hljs-keyword">FORMAT</span>(<span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">CAST</span>(out_t.Attendance <span class="hljs-keyword">AS</span> <span class="hljs-built_in">FLOAT</span>)) / PracticeCounts.TotalPracticesCount, <span class="hljs-string">'0.00'</span>) <span class="hljs-keyword">AS</span> Attendance
<span class="hljs-keyword">FROM</span> 
    StudentPracticesSummaryByPractiseID out_t
<span class="hljs-keyword">JOIN</span> 
    PracticeCounts <span class="hljs-keyword">ON</span> out_t.StudentID = PracticeCounts.StudentID
<span class="hljs-keyword">WHERE</span> 
    CompletedAllPractices = <span class="hljs-string">'True'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
    out_t.StudentID, out_t.FirstName, out_t.LastName, PracticeCounts.TotalPracticesCount;
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/StudentPracticesCompletionStatus.png" alt="StudentPracticesCompletionStatus">
</p>
<ol start="13">
<li>StudentPracticesSummaryByPractiseID</li>
</ol>
<p>Zapytanie to generuje raport na temat uczestnictwa studentów w praktykach zawodowych. Dla każdego studenta i praktyki, prezentuje identyfikator studenta, imię, nazwisko, identyfikator praktyki, informację czy student ukończył wszystkie zajęcia praktyczne ('True' lub 'False'), oraz procentowe obliczenie frekwencji studenta w praktyce.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[StudentPracticesSummaryByPractiseID] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> 
    PA.StudentID,
    S.FirstName,
    S.LastName,
	PA.PractiseID,
    <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">CAST</span>(PA.Attendance <span class="hljs-keyword">AS</span> <span class="hljs-built_in">INT</span>)) = <span class="hljs-keyword">COUNT</span>(PA.Attendance)
         <span class="hljs-keyword">THEN</span> <span class="hljs-string">'True'</span>
         <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'False'</span>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> CompletedAllPractices,
	<span class="hljs-keyword">FORMAT</span>(<span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">CAST</span>(PA.Attendance <span class="hljs-keyword">AS</span> <span class="hljs-built_in">FLOAT</span>)) / <span class="hljs-keyword">COUNT</span>(PA.Attendance), <span class="hljs-string">'0.00'</span>) <span class="hljs-keyword">AS</span> Attendance
<span class="hljs-keyword">FROM</span> 
    PractiseAttendance PA
<span class="hljs-keyword">JOIN</span> 
    Students S <span class="hljs-keyword">ON</span> PA.StudentID = S.StudentID
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
    PA.StudentID, PA.PractiseID, S.FirstName, S.LastName;
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/StudentPracticesSummaryByPractiseID.png" alt="StudentPracticesSummaryByPractiseID">
</p>
<ol start="14">
<li>StudentsEnrolmentInfo</li>
</ol>
<p>Widok przedstawia informacje o zapisach studentów, uwzględniając identyfikator studenta, imię, nazwisko, liczbę unikalnych wydarzeń, do których się zapisali, oraz numer telefonu.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[StudentsEnrolmentInfo] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>        
	dbo.Students.StudentID, 
	dbo.Students.FirstName, 
	dbo.Students.LastName, 
	<span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> dbo.Order_details.OfferID) <span class="hljs-keyword">AS</span> Num_of_events, 
	dbo.Students.Phone
<span class="hljs-keyword">FROM</span>            
	dbo.Users 
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
	dbo.Students <span class="hljs-keyword">ON</span> dbo.Users.UserID = dbo.Students.StudentID 
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
	dbo.Orders <span class="hljs-keyword">ON</span> dbo.Orders.StudentID = dbo.Students.StudentID 
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
	dbo.Order_details <span class="hljs-keyword">ON</span> dbo.Order_details.OrderID = dbo.Orders.OrderID
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
	dbo.Students.StudentID, 
	dbo.Students.FirstName, 
	dbo.Students.LastName, 
	dbo.Students.Phone
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/StudentsEnrolmentInfo.png" alt="StudentsEnrolmentInfo">
</p>
<ol start="15">
<li>StudiesProfitView</li>
</ol>
<p>Widok prezentuje kompleksowe informacje o dochodach i zapisanych studentach dla różnych studiów. Obejmuje identyfikator studium, nazwę, liczbę studentów, całkowity dochód, ilość semestrów oraz imię i nazwisko menedżera studium.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">SELECT</span>
    s.StudiesID,
    s.Name,
    <span class="hljs-keyword">ISNULL</span>((
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(od.OrderDetailsID)
        <span class="hljs-keyword">FROM</span> Order_details od
        <span class="hljs-keyword">WHERE</span> od.OfferID = s.StudiesID
    ), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> Students_number,
    <span class="hljs-keyword">ISNULL</span>((
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">SUM</span>(od.Value)
        <span class="hljs-keyword">FROM</span> Order_details od
        <span class="hljs-keyword">WHERE</span> od.OrderID <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> p.OrderID <span class="hljs-keyword">FROM</span> Payments p)
        <span class="hljs-keyword">AND</span> od.OfferID = s.StudiesID
    ), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> Profit,
    <span class="hljs-keyword">ISNULL</span>((
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(sem.SemesterID)
        <span class="hljs-keyword">FROM</span> Semesters sem
        <span class="hljs-keyword">WHERE</span> sem.StudiesID = s.StudiesID
    ), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> Semesters_number,
    <span class="hljs-keyword">TRIM</span>(e.FirstName) + <span class="hljs-string">' '</span> + <span class="hljs-keyword">TRIM</span>(e.LastName) <span class="hljs-keyword">AS</span> Menager_name
<span class="hljs-keyword">FROM</span>
    Studies s
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> TeachingStaff t <span class="hljs-keyword">ON</span> t.TeacherID = s.MenagerID
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> Employees e <span class="hljs-keyword">ON</span> e.EmployeeID = t.TeacherID;
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/StudiesProfitView.png" alt="StudiesProfitView">
</p>
<ol start="16">
<li>WebinarProfitView</li>
</ol>
<p>Widok prezentuje szczegółowe informacje o poszczególnych webinarach, uwzględniając identyfikator, nazwę, liczbę uczestników, całkowity dochód oraz datę wydarzenia. Dodatkowo, dostarcza imię i nazwisko prowadzącego.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> [dbo].[WebinarProfitView] <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
	w.WebinarID,
    w.WebinarName,
	<span class="hljs-keyword">ISNULL</span>((
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(od.OrderDetailsID)
        <span class="hljs-keyword">FROM</span> Order_details od
        <span class="hljs-keyword">WHERE</span> od.OfferID = w.WebinarID
    ), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> Students_number,
    <span class="hljs-keyword">ISNULL</span>((
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">SUM</span>(od.Value)
        <span class="hljs-keyword">FROM</span> Order_details od
        <span class="hljs-keyword">WHERE</span> od.OrderID <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> p.OrderID <span class="hljs-keyword">FROM</span> Payments p)
        <span class="hljs-keyword">AND</span> od.OfferID = w.WebinarID
    ), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> Profit,
	<span class="hljs-keyword">FORMAT</span>(w.Date, <span class="hljs-string">'dd-MM-yyyy'</span>) <span class="hljs-keyword">AS</span> Event_date,
	<span class="hljs-keyword">TRIM</span>(e.FirstName) + <span class="hljs-string">' '</span> + <span class="hljs-keyword">TRIM</span>(e.LastName) <span class="hljs-keyword">AS</span> Teacher_name
<span class="hljs-keyword">FROM</span>
    Webinar w
<span class="hljs-keyword">JOIN</span> TeachingStaff t <span class="hljs-keyword">ON</span> t.TeacherID = w.TeacherID
<span class="hljs-keyword">JOIN</span> Employees e <span class="hljs-keyword">ON</span> e.EmployeeID = t.TeacherID
</div></code></pre>
<p align="center">
  <img src="file:///c:/Users/tomci/Desktop/bazydanych/Bazy_Danych_Projekt_2023-24/views/WebinarProfitView.png" alt="WebinarProfitView">
</p>
<p><strong>Procedury:</strong></p>
<ol>
<li>AddLessonAttendance</li>
</ol>
<p>Procedura ta pozwala na dodanie konkretnemu użytkownikowi obecności na danej lekcji, przed wykonaniem polecenia dodawania sprawdza także czy lekcja o podanym ID istnieje oraz czy uczeń o podanym ID istnieje.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddLessonAttendance]
    @LessonID <span class="hljs-built_in">INT</span>,
    @StudentID <span class="hljs-built_in">INT</span>,
    @IsPresent <span class="hljs-built_in">BIT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Lessons <span class="hljs-keyword">WHERE</span> LessonID = @LessonID) <span class="hljs-keyword">AND</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Students <span class="hljs-keyword">WHERE</span> StudentID = @StudentID)
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> LessonsAttendance(LessonID, StudentID, Attendance)
        <span class="hljs-keyword">VALUES</span> (@LessonID, @StudentID, @IsPresent);
    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="2">
<li>AddMeetingAttendance</li>
</ol>
<p>Procedura ta pozwala na dodanie konkretnemu użytkownikowi obecności na danym spotkaniu, przed wykonaniem polecenia dodawania sprawdza także czy spotkanie o podanym ID istnieje oraz czy uczeń o podanym ID istnieje.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddMeetingAttendance]
    @MeetingID <span class="hljs-built_in">INT</span>,
    @StudentID <span class="hljs-built_in">INT</span>,
    @IsPresent <span class="hljs-built_in">BIT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Meetings <span class="hljs-keyword">WHERE</span> MeetingID = @MeetingID) <span class="hljs-keyword">AND</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Students <span class="hljs-keyword">WHERE</span> StudentID = @StudentID)
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> CourseAttendance (MeetingID, StudentID, Attendance)
        <span class="hljs-keyword">VALUES</span> (@MeetingID, @StudentID, @IsPresent);
    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="3">
<li>AddPractiseAttendance</li>
</ol>
<p>Procedura ta pozwala na dodanie konkretnemu użytkownikowi obecności na danych praktykach, przed wykonaniem polecenia dodawania sprawdza także czy praktyki o podanym ID istnieją oraz czy uczeń o podanym ID istnieje.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddPractiseAttendance]
    @PractiseID <span class="hljs-built_in">INT</span>,
    @StudentID <span class="hljs-built_in">INT</span>,
    @IsPresent <span class="hljs-built_in">BIT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Practices <span class="hljs-keyword">WHERE</span> PractiseID = @PractiseID) <span class="hljs-keyword">AND</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Students <span class="hljs-keyword">WHERE</span> StudentID = @StudentID)
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> PractiseAttendance(PractiseID, StudentID, Attendance)
        <span class="hljs-keyword">VALUES</span> (@PractiseID, @StudentID, @IsPresent);
    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="4">
<li>AddNewOrder</li>
</ol>
<p>Procedura ta umożliwa dodatnie do tabeli Orders nowego zamówienia dla studenta o podanym ID, jako datę zamówienia wstawia aktualną datę.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddNewOrder]
    @StudentID <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Orders (StudentID, OrderDate)
    <span class="hljs-keyword">VALUES</span> (@StudentID, <span class="hljs-keyword">GETDATE</span>());

<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="5">
<li>AddOrderDetails</li>
</ol>
<p>Procedura ta pozwala na dodanie szczegółów do konkretnego zamówienia, przyjmuje argumenty takie jak: numer zamówienia, nummer oferty zamówionego produktu, koszt tego produktu i ewentualną zniżkę, przed dodaniem do tabeli upewnia się czy suma wartości pozostałych kupionych produktów oraz tego wstawianego nie przekracza przypadkiem kwoty która została zapłacona za zamówienia.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddOrderDetails]
    @OrderID <span class="hljs-built_in">INT</span>,
    @OfferID <span class="hljs-built_in">INT</span>,
    @<span class="hljs-keyword">Value</span> MONEY,
    @Discount <span class="hljs-built_in">FLOAT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> @OrderTotalMoney MONEY;
    <span class="hljs-keyword">DECLARE</span> @PaymentTotalMoney MONEY;

    IF EXISTS (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Orders <span class="hljs-keyword">WHERE</span> OrderID = @OrderID)
    <span class="hljs-keyword">BEGIN</span>
        
        <span class="hljs-keyword">SELECT</span> @OrderTotalMoney = <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">Value</span> * (<span class="hljs-number">1</span> - Discount)) 
        <span class="hljs-keyword">FROM</span> Order_details 
        <span class="hljs-keyword">WHERE</span> OrderID = @OrderID;

        <span class="hljs-keyword">SET</span> @OrderTotalMoney = @OrderTotalMoney + (@<span class="hljs-keyword">Value</span> * (<span class="hljs-number">1</span> - @Discount));

        <span class="hljs-keyword">SELECT</span> @PaymentTotalMoney = <span class="hljs-keyword">Value</span> 
        <span class="hljs-keyword">FROM</span> Payments 
        <span class="hljs-keyword">WHERE</span> OrderID = @OrderID;

        IF @OrderTotalMoney &lt;= @PaymentTotalMoney
        <span class="hljs-keyword">BEGIN</span>
            <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Order_details (OrderID, OfferID, <span class="hljs-keyword">Value</span>, Discount)
            <span class="hljs-keyword">VALUES</span> (@OrderID, @OfferID, @<span class="hljs-keyword">Value</span>, @Discount);
        <span class="hljs-keyword">END</span>
    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="6">
<li>AddPayment</li>
</ol>
<p>Procedura ta pozwala na dodanie nowego rekordu w tabeli Payments, dla konkretnego zamówieniam daty oraz kwoty oraz dla ewentualnej daty odroczenia płatności. Procedura sprawdza także czy podane ID zamówienia istnieje w tabeli z zamówieniami.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddPayment]
    @OrderID <span class="hljs-built_in">INT</span>,
    @<span class="hljs-built_in">Date</span> DATETIME,
    @<span class="hljs-keyword">Value</span> MONEY,
    @CancelDate DATETIME
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Orders <span class="hljs-keyword">WHERE</span> OrderID = @OrderID)
    <span class="hljs-keyword">BEGIN</span>
   
        <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Payments (OrderID, <span class="hljs-built_in">Date</span>, <span class="hljs-keyword">Value</span>, CancelDate)
        <span class="hljs-keyword">VALUES</span> (@OrderID, @<span class="hljs-built_in">Date</span>, @<span class="hljs-keyword">Value</span>, @CancelDate);

    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="7">
<li>GetOrdersPaymentsByStudentID</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[GetOrdersPaymentsByStudentID]
    @StudentID <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> 
        Ord.OrderID, 
        <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">ROUND</span>(OD.Value*(<span class="hljs-number">1</span>-OD.Discount),<span class="hljs-number">2</span>)) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Value</span>, 
        P.Value <span class="hljs-keyword">AS</span> Paid, 
        <span class="hljs-keyword">ROUND</span>(<span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">ROUND</span>(<span class="hljs-keyword">ROUND</span>(OD.Value*(<span class="hljs-number">1</span>-OD.Discount),<span class="hljs-number">2</span>),<span class="hljs-number">2</span>))-P.Value,<span class="hljs-number">2</span>) <span class="hljs-keyword">AS</span> ToPay, 
        P.CancelDate 
    <span class="hljs-keyword">FROM</span> 
        Orders <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Ord</span>
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
        Order_details <span class="hljs-keyword">AS</span> OD <span class="hljs-keyword">ON</span> Ord.OrderID = OD.OrderID
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> 
        Payments <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">ON</span> Ord.OrderID = P.OrderID
    <span class="hljs-keyword">WHERE</span> 
        Ord.StudentID = @StudentID
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
        Ord.OrderID, P.CancelDate, P.Value;
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="8">
<li>GetStudentPracticeCompletionStatus</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[GetStudentPracticeCompletionStatus]
    @StudentID <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> *
    <span class="hljs-keyword">FROM</span> StudentPracticesCompletionStatus
    <span class="hljs-keyword">WHERE</span> StudentID = @StudentID;
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="9">
<li>GetStudentPracticeSummary</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[GetStudentPracticeSummary]
    @StudentID <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> 
        PA.StudentID,
        S.FirstName,
        S.LastName,
        PA.PractiseID,
        <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">CAST</span>(PA.Attendance <span class="hljs-keyword">AS</span> <span class="hljs-built_in">INT</span>)) = <span class="hljs-keyword">COUNT</span>(PA.Attendance)
             <span class="hljs-keyword">THEN</span> <span class="hljs-string">'True'</span>
             <span class="hljs-keyword">ELSE</span> <span class="hljs-string">'False'</span>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> CompletedAllPractices
    <span class="hljs-keyword">FROM</span> 
        PractiseAttendance PA
    <span class="hljs-keyword">JOIN</span> 
        Students S <span class="hljs-keyword">ON</span> PA.StudentID = S.StudentID
    <span class="hljs-keyword">WHERE</span>
        PA.StudentID = @StudentID
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
        PA.StudentID, PA.PractiseID, S.FirstName, S.LastName;
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="10">
<li>MeetingsByTeacher</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">Procedure</span> [dbo].[MeetingsByTeacher]
	@TeacherID <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span> 
<span class="hljs-keyword">Begin</span>
<span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> Meetings <span class="hljs-keyword">as</span> m
<span class="hljs-keyword">where</span> m.TeacherID=@TeacherID
<span class="hljs-keyword">End</span>
</div></code></pre>
<ol start="11">
<li>OrdersByStudentID</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[OrdersByStudentID]
    @StudentID <span class="hljs-built_in">int</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> O.OfferID, O.Name, O.Type, O.Place, OD.Value*(<span class="hljs-number">1</span>-OD.Discount) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Value</span>, P.Value <span class="hljs-keyword">AS</span> Paid, OD.Value-P.Value <span class="hljs-keyword">AS</span> ToPay, P.CancelDate <span class="hljs-keyword">FROM</span> Orders <span class="hljs-keyword">AS</span> <span class="hljs-keyword">Ord</span>
	<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Order_details <span class="hljs-keyword">AS</span> OD <span class="hljs-keyword">ON</span> Ord.OrderID = OD.OrderID
	<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Offers <span class="hljs-keyword">AS</span> O <span class="hljs-keyword">on</span> O.OfferID = OD.OfferID
	<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Payments <span class="hljs-keyword">AS</span> P <span class="hljs-keyword">on</span> Ord.OrderID =P.PaymentID
	<span class="hljs-keyword">WHERE</span> Ord.StudentID = @StudentID
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="12">
<li>UpdateLessonAttendance</li>
</ol>
<p>Proceudra ta umożliwia zmianę statusu obecności danego ucznia na danej lekcji, przed wykonaniem polecenia sprawdza czy modyfikowany rekord obecności faktycznie istnieje.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[UpdateLessonAttendance]
    @LessonID <span class="hljs-built_in">INT</span>,
    @StudentID <span class="hljs-built_in">INT</span>,
    @NewAttendance <span class="hljs-built_in">BIT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> LessonsAttendance <span class="hljs-keyword">WHERE</span> LessonID = @LessonID <span class="hljs-keyword">AND</span> StudentID = @StudentID)
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">UPDATE</span> LessonsAttendance
        <span class="hljs-keyword">SET</span> Attendance = @NewAttendance
        <span class="hljs-keyword">WHERE</span> LessonID = @LessonID <span class="hljs-keyword">AND</span> StudentID = @StudentID;
    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="13">
<li>UpdateMeetingAttendance</li>
</ol>
<p>Proceudra ta umożliwia zmianę statusu obecności danego ucznia na danym spotkaniu, przed wykonaniem polecenia sprawdza czy modyfikowany rekord obecności faktycznie istnieje.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[UpdateMeetingAttendance]
    @MeetingID <span class="hljs-built_in">INT</span>,
    @StudentID <span class="hljs-built_in">INT</span>,
    @NewAttendance <span class="hljs-built_in">BIT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> CourseAttendance <span class="hljs-keyword">WHERE</span> MeetingID = @MeetingID <span class="hljs-keyword">AND</span> StudentID = @StudentID)
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">UPDATE</span> CourseAttendance
        <span class="hljs-keyword">SET</span> Attendance = @NewAttendance
        <span class="hljs-keyword">WHERE</span> MeetingID = @MeetingID <span class="hljs-keyword">AND</span> StudentID = @StudentID;
    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="14">
<li>UpdatePractiseAttendance</li>
</ol>
<p>Proceudra ta umożliwia zmianę statusu obecności danego ucznia na danych praktykach, przed wykonaniem polecenia sprawdza czy modyfikowany rekord obecności faktycznie istnieje.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[UpdatePractiseAttendance]
    @PractiseID <span class="hljs-built_in">INT</span>,
    @StudentID <span class="hljs-built_in">INT</span>,
    @NewAttendance <span class="hljs-built_in">BIT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> PractiseAttendance <span class="hljs-keyword">WHERE</span> PractiseID = @PractiseID <span class="hljs-keyword">AND</span> StudentID = @StudentID)
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">UPDATE</span> PractiseAttendance
        <span class="hljs-keyword">SET</span> Attendance = @NewAttendance
        <span class="hljs-keyword">WHERE</span> PractiseID = @PractiseID <span class="hljs-keyword">AND</span> StudentID = @StudentID;
    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="14">
<li>GetProfitInTimeRange</li>
</ol>
<p>Proceudra przedstawia dochód z poszczególnych kursów w zadanym przedziale czasowym.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> GetProfitInTimeRange
    @<span class="hljs-keyword">From</span> <span class="hljs-built_in">DATE</span>,
    @<span class="hljs-keyword">To</span> <span class="hljs-built_in">DATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span>
        c.CourseName,
        <span class="hljs-keyword">ISNULL</span>((
            <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">SUM</span>(od.Value)
            <span class="hljs-keyword">FROM</span> Order_details od
            <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Payments p <span class="hljs-keyword">ON</span> od.OrderID = p.OrderID
            <span class="hljs-keyword">WHERE</span> od.OfferID = c.CourseID <span class="hljs-keyword">AND</span> p.[<span class="hljs-built_in">Date</span>] <span class="hljs-keyword">BETWEEN</span> @<span class="hljs-keyword">From</span> <span class="hljs-keyword">AND</span> @<span class="hljs-keyword">To</span>
        ), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> Profit
    <span class="hljs-keyword">FROM</span> Courses c; 
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="15">
<li>EnrolledStudentsToCoursesInTimeRange</li>
</ol>
<p>Proceudra przedstawia studentów zapisanych na poszczególne kursy w zadanym przedziale czasowym.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> EnrolledStudentsToCoursesInTimeRange
    @<span class="hljs-keyword">From</span> <span class="hljs-built_in">DATE</span>,
    @<span class="hljs-keyword">To</span> <span class="hljs-built_in">DATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> *
    <span class="hljs-keyword">FROM</span> StudentCourseDetailsView
    <span class="hljs-keyword">WHERE</span> StartDate <span class="hljs-keyword">BETWEEN</span> @<span class="hljs-keyword">From</span> <span class="hljs-keyword">AND</span> @<span class="hljs-keyword">To</span>;
<span class="hljs-keyword">END</span>;
</div></code></pre>
<p>16.EnrolledStudentsToGatheringsInTimeRange</p>
<p>Proceudra przedstawia studentów zapisanych na poszczególne zjazdy w zadanym przedziale czasowym.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> EnrolledStudentsToGatheringsInTimeRange
    @<span class="hljs-keyword">From</span> <span class="hljs-built_in">DATE</span>,
    @<span class="hljs-keyword">To</span> <span class="hljs-built_in">DATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> *
    <span class="hljs-keyword">FROM</span> EnrolledStudentsToGatherings
    <span class="hljs-keyword">WHERE</span> [<span class="hljs-built_in">Date</span>] <span class="hljs-keyword">BETWEEN</span> @<span class="hljs-keyword">From</span> <span class="hljs-keyword">AND</span> @<span class="hljs-keyword">To</span>;
<span class="hljs-keyword">END</span>;

</div></code></pre>
<p>17.EnrolledStudentsToStudiesInDateRange</p>
<p>Proceudra przedstawia studentów zapisanych na poszczególne studia w zadanym przedziale czasowym.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> EnrolledStudentsToStudiesInDateRange
    @<span class="hljs-keyword">From</span> <span class="hljs-built_in">DATE</span>,
    @<span class="hljs-keyword">To</span> <span class="hljs-built_in">DATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> *
    <span class="hljs-keyword">FROM</span> dbo.EnrolledStudentsToStudies
    <span class="hljs-keyword">WHERE</span> StartDate <span class="hljs-keyword">BETWEEN</span> @<span class="hljs-keyword">From</span> <span class="hljs-keyword">AND</span> @<span class="hljs-keyword">To</span>;
<span class="hljs-keyword">END</span>;
</div></code></pre>
<p>18.EnrolledStudentsToWebinarsInDateRange</p>
<p>Proceudra przedstawia studentów zapisanych na poszczególne webinary w zadanym przedziale czasowym.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> EnrolledStudentsToWebinarsInDateRange
    @<span class="hljs-keyword">From</span> <span class="hljs-built_in">DATE</span>,
    @<span class="hljs-keyword">To</span> <span class="hljs-built_in">DATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> *
    <span class="hljs-keyword">FROM</span> dbo.EnrolledStudentsToWebinars
    <span class="hljs-keyword">WHERE</span> [<span class="hljs-built_in">Date</span>] <span class="hljs-keyword">BETWEEN</span> @<span class="hljs-keyword">From</span> <span class="hljs-keyword">AND</span> @<span class="hljs-keyword">To</span>;
<span class="hljs-keyword">END</span>;

</div></code></pre>
<ol start="19">
<li>UpdateMeetingDate</li>
</ol>
<p>Procedura UpdateMeetingDate umożliwia aktualizację daty spotkania o określonym MeetingID na nową datę @NewMeetingDate. Natomiast procedura AddNewOffer pozwala na dodanie nowej oferty do bazy danych, sprawdzając wcześniej, czy oferta o podanej nazwie już istnieje, aby uniknąć konfliktów. Jeśli oferta istnieje, procedura zwraca błąd, w przeciwnym razie dodaje nową ofertę z określonymi parametrami, takimi jak Name, Type, Description, Place, Price i DiscountToStudents.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[UpdateMeetingDate]
    @MeetingID <span class="hljs-built_in">INT</span>,
    @NewMeetingDate <span class="hljs-built_in">DATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;

    <span class="hljs-keyword">UPDATE</span> Meetings
    <span class="hljs-keyword">SET</span> <span class="hljs-built_in">Date</span> = @NewMeetingDate
    <span class="hljs-keyword">WHERE</span> MeetingID = @MeetingID;
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="20">
<li>AddNewOffer</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddNewOffer]
    @<span class="hljs-keyword">Name</span> <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">50</span>),
	@<span class="hljs-keyword">Type</span> <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">15</span>),
    @Description <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">50</span>),
    @Place <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">20</span>),
	@Price money,
    @DiscountToStudents <span class="hljs-built_in">DECIMAL</span>(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>)
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;

    IF EXISTS (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Offers <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Name</span> = @<span class="hljs-keyword">Name</span>)
    <span class="hljs-keyword">BEGIN</span>
        THROW <span class="hljs-number">50000</span>, <span class="hljs-string">'Oferta o podanej nazwie już istnieje.'</span>, <span class="hljs-number">1</span>;
        RETURN;
    <span class="hljs-keyword">END</span>

    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Offers (<span class="hljs-keyword">Name</span>, <span class="hljs-keyword">Type</span>, Description, Place, Price, DiscountToStudents)
    <span class="hljs-keyword">VALUES</span> (@<span class="hljs-keyword">Name</span>, @<span class="hljs-keyword">Type</span>, @Description, @Place, @Price, @DiscountToStudents);

<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="21">
<li>AddNewCourse</li>
</ol>
<p>Procedura AddNewCourse służy do dodawania nowego kursu do bazy danych. Najpierw wywołuje procedurę AddNewOffer, aby dodać nową ofertę typu 'Courses', a następnie pobiera identyfikator nowo dodanej oferty. Następnie dodaje kurs z odpowiednimi parametrami, takimi jak TopicID, CourseName, StartDate, ModulesNo, PaymentDay, FullPrice, Deposit i Discount.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddNewCourse]
    @CourseName <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">30</span>),
	@TopicID <span class="hljs-built_in">Int</span>,
    @CourseDescription <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">50</span>),
    @CoursePlace <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">20</span>),
    @Price MONEY,
    @DiscountToStudents <span class="hljs-built_in">DECIMAL</span>(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>),
    @StartDate <span class="hljs-built_in">DATE</span>,
    @EndDate <span class="hljs-built_in">DATE</span>,
	@Deposit Money,
	@PaymentDay <span class="hljs-built_in">Date</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;

    EXEC AddNewOffer @CourseName, 'Courses', @CourseDescription, @CoursePlace, @Price, @DiscountToStudents;

    <span class="hljs-keyword">DECLARE</span> @NewOfferID <span class="hljs-built_in">INT</span>;
    <span class="hljs-keyword">SET</span> @NewOfferID = (<span class="hljs-keyword">SELECT</span> SCOPE_IDENTITY());

    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Courses (CourseID, TopicID, CourseName, StartDate, ModulesNo, PaymentDay, FullPrice, Deposit, Discount)
    <span class="hljs-keyword">VALUES</span> (@NewOfferID, @TopicID, @CourseName, @StartDate, <span class="hljs-number">0</span>, @PaymentDay, @Price, @Deposit, @DiscountToStudents);
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="22">
<li>AddNewModule</li>
</ol>
<p>Procedura AddNewModule służy do dodawania nowego modułu związanego z określonym kursem. Przed dodaniem modułu sprawdza istnienie kursu o podanym CourseID, a następnie pobiera datę rozpoczęcia kursu i dodaje nowy moduł z odpowiednimi parametrami, takimi jak Title, Type, EndDate i Classroom.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddNewModule]
    @CourseID <span class="hljs-built_in">INT</span>,
    @Title <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">50</span>),
    @<span class="hljs-keyword">Type</span> <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">10</span>),
    @EndDate <span class="hljs-built_in">DATE</span>,
    @Classroom <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">10</span>)
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;

    IF NOT EXISTS (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Courses <span class="hljs-keyword">WHERE</span> CourseID = @CourseID)
    <span class="hljs-keyword">BEGIN</span>
        THROW <span class="hljs-number">50000</span>, <span class="hljs-string">'Podane CourseID nie istnieje w Courses.'</span>, <span class="hljs-number">1</span>;
        RETURN;
    <span class="hljs-keyword">END</span>

    <span class="hljs-keyword">DECLARE</span> @StartDate <span class="hljs-built_in">DATE</span>;
    <span class="hljs-keyword">SET</span> @StartDate = (<span class="hljs-keyword">SELECT</span> StartDate <span class="hljs-keyword">FROM</span> Courses <span class="hljs-keyword">WHERE</span> CourseID = @CourseID);

    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Modules (CourseID, Title, <span class="hljs-keyword">Type</span>, StartDate, EndDate, Classroom)
    <span class="hljs-keyword">VALUES</span> (@CourseID, @Title, @<span class="hljs-keyword">Type</span>, @StartDate, @EndDate, @Classroom);
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="23">
<li>AddNewMeeting</li>
</ol>
<p>Ta procedura przechowuje informacje o nowym spotkaniu w bazie danych. Przyjmuje różne parametry, takie jak ModuleID, LanguageID, Date, Type, Place, Link, Title, TeacherID i TranslatorID. Przed dodaniem spotkania sprawdza istnienie modułu, nauczyciela i tłumacza (jeśli podano TranslatorID), a w przypadku braku zapisuje wartość NULL w TranslatorID.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [dbo].[AddNewMeeting]
    @ModuleID <span class="hljs-built_in">INT</span>,
	@LanguageID <span class="hljs-built_in">INT</span>,
	@<span class="hljs-built_in">Date</span> <span class="hljs-built_in">date</span>,
	@<span class="hljs-keyword">Type</span> <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">10</span>),
	@Place <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">10</span>),
	@<span class="hljs-keyword">Link</span> <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">30</span>),
    @Title <span class="hljs-keyword">NVARCHAR</span>(<span class="hljs-number">50</span>),
    @TeacherID <span class="hljs-built_in">INT</span>,
	@TranslatorID <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;

    IF NOT EXISTS (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Modules <span class="hljs-keyword">WHERE</span> ModuleID = @ModuleID)
    <span class="hljs-keyword">BEGIN</span>
        THROW <span class="hljs-number">50000</span>, <span class="hljs-string">'Moduł o podanym ModuleID nie istnieje.'</span>, <span class="hljs-number">1</span>;
        RETURN;
    <span class="hljs-keyword">END</span>

	<span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> TeachingStaff <span class="hljs-keyword">WHERE</span> TeacherID = @TeacherID)
    <span class="hljs-keyword">BEGIN</span>
        THROW <span class="hljs-number">50000</span>, <span class="hljs-string">'Nauczyciel o podanym TeacherID nie istnieje.'</span>, <span class="hljs-number">1</span>;
        RETURN;
    <span class="hljs-keyword">END</span>

	<span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> Translators <span class="hljs-keyword">WHERE</span> TranslatorID = @TranslatorID)
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">SET</span> @TranslatorID = <span class="hljs-literal">NULL</span>;
    <span class="hljs-keyword">END</span>

    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Meetings (ModuleID, LanguageID, <span class="hljs-built_in">Date</span>, <span class="hljs-keyword">Type</span>, Place, <span class="hljs-keyword">Link</span>, TeacherID, TranslatorID)
    <span class="hljs-keyword">VALUES</span> (@ModuleID, @LanguageID, @<span class="hljs-built_in">Date</span>, @<span class="hljs-keyword">Type</span>, @Place, @<span class="hljs-keyword">Link</span>, @TeacherID, @TranslatorID);

<span class="hljs-keyword">END</span>;
</div></code></pre>
<p><strong>Funkcje:</strong></p>
<ol>
<li>CourseEnrolmentsNumber</li>
</ol>
<p>Ta funkcja zwraca ilość użytkowników aktualnie zapisanych na określony kurs o identyfikatorze (CourseID). Wykorzystuje informacje o zapisach, płatnościach i szczegółach zamówienia, filtrując rezultaty dla konkretnego kursu, a także sprawdzając, czy zamówienie nie zostało anulowane.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">Create</span> <span class="hljs-keyword">FUNCTION</span> [dbo].[CourseEnrolmentsNumber](@CourseID <span class="hljs-built_in">INT</span>)
<span class="hljs-keyword">RETURNS</span> <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>

    <span class="hljs-keyword">DECLARE</span> @Enrolments <span class="hljs-built_in">INT</span>;
    
	<span class="hljs-keyword">select</span> @Enrolments = <span class="hljs-keyword">count</span>(o.StudentID) <span class="hljs-keyword">from</span> Orders <span class="hljs-keyword">as</span> o
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Payments <span class="hljs-keyword">as</span> p <span class="hljs-keyword">on</span> p.OrderID=o.OrderID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Order_details <span class="hljs-keyword">as</span> d <span class="hljs-keyword">on</span> d.OrderID=p.OrderID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Offers <span class="hljs-keyword">as</span> f <span class="hljs-keyword">on</span> f.OfferID=d.OfferID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Courses <span class="hljs-keyword">as</span> c <span class="hljs-keyword">on</span> c.CourseID=f.OfferID
	<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> c.CourseID,p.CancelDate
	<span class="hljs-keyword">having</span> p.CancelDate <span class="hljs-keyword">is</span> <span class="hljs-literal">Null</span> <span class="hljs-keyword">and</span> c.CourseID=@CourseID

    <span class="hljs-keyword">RETURN</span> @Enrolments;
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="2">
<li>IsStudyEnrollmentPossible</li>
</ol>
<p>Ta funkcja sprawdza, czy istnieje możliwość zapisania się na studium o określonym identyfikatorze (StudyID), porównując aktualną liczbę zapisanych studentów (wykorzystując funkcję dbo.StudyEnrollmentsNumber) do pojemności studium. Jeżeli istnieje dostępna przestrzeń, zwraca wartość 1, w przeciwnym razie 0.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> [dbo].[IsStudyEnrollmentPossible] (@StudyID <span class="hljs-built_in">INT</span>)
<span class="hljs-keyword">RETURNS</span> <span class="hljs-built_in">BIT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> @<span class="hljs-keyword">Capacity</span> <span class="hljs-built_in">INT</span>;

    <span class="hljs-keyword">SELECT</span> @<span class="hljs-keyword">Capacity</span> = s.StudentCapacity 
    <span class="hljs-keyword">FROM</span> Studies <span class="hljs-keyword">as</span> s
    <span class="hljs-keyword">WHERE</span> s.StudiesID = @StudyID;

    IF (dbo.StudyEnrollmentsNumber(@StudyID) &lt; @Capacity) 
        RETURN 1; 
    RETURN 0;  
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="3">
<li>StudyEnrollmentsNumber</li>
</ol>
<p>Ta funkcja zwraca ilość obecnie zapisanych studentów na studium o określonym identyfikatorze (StudyID). Wykorzystuje do tego liczbę zamówień (Orders), płatności (Payments), szczegóły zamówienia (Order_details), oferty (Offers) i samego studium (Studies). Funkcja uwzględnia tylko te zapisy, które nie zostały anulowane (CancelDate is Null) i dotyczą danego studium.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> [dbo].[StudyEnrollmentsNumber] (@StudyID <span class="hljs-built_in">INT</span>)
<span class="hljs-keyword">RETURNS</span> <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> @Enrollments <span class="hljs-built_in">INT</span>;

    <span class="hljs-keyword">select</span> @Enrollments = <span class="hljs-keyword">count</span>(o.StudentID) <span class="hljs-keyword">from</span> Orders <span class="hljs-keyword">as</span> o
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Payments <span class="hljs-keyword">as</span> p <span class="hljs-keyword">on</span> p.OrderID=o.OrderID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Order_details <span class="hljs-keyword">as</span> d <span class="hljs-keyword">on</span> d.OrderID=p.OrderID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Offers <span class="hljs-keyword">as</span> f <span class="hljs-keyword">on</span> f.OfferID=d.OfferID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Studies <span class="hljs-keyword">as</span> s <span class="hljs-keyword">on</span> s.StudiesID=f.OfferID
	<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> p.CancelDate, s.StudiesID
	<span class="hljs-keyword">having</span> p.CancelDate <span class="hljs-keyword">is</span> <span class="hljs-literal">Null</span> <span class="hljs-keyword">and</span> s.StudiesID=@StudyID

    <span class="hljs-keyword">RETURN</span> @Enrollments;
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="4">
<li>WebinarEnrolmentsNumber</li>
</ol>
<p>Ta funkcja zwraca liczbę zapisanych studentów na webinar o określonym identyfikatorze (WebinarID). Wykorzystuje do tego liczbę zamówień (Orders), płatności (Payments), szczegóły zamówienia (Order_details), oferty (Offers) i samego webinaru (Webinar). Funkcja uwzględnia tylko te zapisy, które nie zostały anulowane (CancelDate is Null) i dotyczą danego webinaru.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> [dbo].[WebinarEnrolmentsNumber](@WebinarID <span class="hljs-built_in">INT</span>)
<span class="hljs-keyword">RETURNS</span> <span class="hljs-built_in">INT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>

    <span class="hljs-keyword">DECLARE</span> @Enrolments <span class="hljs-built_in">INT</span>;
    
	<span class="hljs-keyword">select</span> @Enrolments = <span class="hljs-keyword">count</span>(o.StudentID) <span class="hljs-keyword">from</span> Orders <span class="hljs-keyword">as</span> o
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Payments <span class="hljs-keyword">as</span> p <span class="hljs-keyword">on</span> p.OrderID=o.OrderID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Order_details <span class="hljs-keyword">as</span> d <span class="hljs-keyword">on</span> d.OrderID=p.OrderID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Offers <span class="hljs-keyword">as</span> f <span class="hljs-keyword">on</span> f.OfferID=d.OfferID
	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> Webinar <span class="hljs-keyword">as</span> w <span class="hljs-keyword">on</span> w.WebinarID=f.OfferID
	<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> w.WebinarID,p.CancelDate
	<span class="hljs-keyword">having</span> p.CancelDate <span class="hljs-keyword">is</span> <span class="hljs-literal">Null</span> <span class="hljs-keyword">and</span> w.WebinarID=@WebinarID

    <span class="hljs-keyword">RETURN</span> @Enrolments;
<span class="hljs-keyword">END</span>
</div></code></pre>
<p><strong>Triggery:</strong></p>
<ol>
<li>CheckStudentCountOnStudies</li>
</ol>
<p>Ten trigger sprawdza, czy liczba studentów zapisanych na studium przekracza maksymalną pojemność studium po dodaniu lub aktualizacji zamówienia. Jeśli liczba przekracza pojemność, wyświetla komunikat o błędzie i wykonuje rollback transakcji, uniemożliwiając przekroczenie limitu pojemności studium.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> [dbo].[CheckStudentCountOnStudies]
<span class="hljs-keyword">ON</span> [dbo].[Order_details]
<span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">INSERT</span>, <span class="hljs-keyword">UPDATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> @StudiesID <span class="hljs-built_in">INT</span>,
            @NewStudentCount <span class="hljs-built_in">INT</span>,
            @MaxStudentCapacity <span class="hljs-built_in">INT</span>;

    <span class="hljs-keyword">SELECT</span> @StudiesID = o.OfferID
    <span class="hljs-keyword">FROM</span> inserted i
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Offers o <span class="hljs-keyword">ON</span> i.OfferID = o.OfferID;

    <span class="hljs-keyword">SELECT</span> @NewStudentCount = <span class="hljs-keyword">COUNT</span>(*)
    <span class="hljs-keyword">FROM</span> Order_details od
    <span class="hljs-keyword">WHERE</span> od.OfferID = @StudiesID;

    <span class="hljs-keyword">SELECT</span> @MaxStudentCapacity = s.StudentCapacity
    <span class="hljs-keyword">FROM</span> Studies s
    <span class="hljs-keyword">WHERE</span> s.StudiesID = @StudiesID;

    IF (@NewStudentCount &gt; @MaxStudentCapacity)
    <span class="hljs-keyword">BEGIN</span>
        RAISERROR(<span class="hljs-string">'Liczba studentów przekracza maksymalną pojemność studium!'</span>, <span class="hljs-number">16</span>, <span class="hljs-number">1</span>);
        <span class="hljs-keyword">ROLLBACK</span>;
    <span class="hljs-keyword">END</span>
<span class="hljs-keyword">END</span>;
</div></code></pre>
<ol start="2">
<li>UpdateModulesNumber</li>
</ol>
<p>Ten trigger automatycznie aktualizuje liczbę modułów (ModulesNo) w tabeli Courses po dodaniu nowego modułu. Działa na zasadzie zliczania liczby modułów przypisanych do danego kursu i aktualizuje odpowiedni rekord w tabeli Courses.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> [dbo].[UpdateModulesNumber]
<span class="hljs-keyword">ON</span> [dbo].[Modules]
<span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">INSERT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;

    <span class="hljs-keyword">DECLARE</span> @CourseID <span class="hljs-built_in">INT</span>;

    <span class="hljs-keyword">SELECT</span> @CourseID = CourseID
    <span class="hljs-keyword">FROM</span> inserted;

    <span class="hljs-keyword">UPDATE</span> Courses
    <span class="hljs-keyword">SET</span> ModulesNo = (
        <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ISNULL</span>(<span class="hljs-keyword">COUNT</span>(ModuleID), <span class="hljs-number">0</span>)
        <span class="hljs-keyword">FROM</span> Modules
        <span class="hljs-keyword">WHERE</span> CourseID = @CourseID
    )
    <span class="hljs-keyword">WHERE</span> CourseID = @CourseID;
<span class="hljs-keyword">END</span>;

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules] <span class="hljs-keyword">ENABLE</span> <span class="hljs-keyword">TRIGGER</span> [UpdateModulesNumber]
</div></code></pre>
<ol start="3">
<li>CheckAndUpdateModuleDates</li>
</ol>
<p>Ten trigger sprawdza i aktualizuje daty modułów (StartDate i EndDate) w tabeli Modules po zmianie daty spotkania (MeetingDate) w tabeli Meetings. Jeśli spotkanie już się odbyło, trigger zwraca błąd i blokuje transakcję, w przeciwnym razie aktualizuje odpowiednie daty modułów.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> [dbo].[CheckAndUpdateModuleDates]
<span class="hljs-keyword">ON</span> [dbo].[Meetings]
<span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">UPDATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;

    <span class="hljs-keyword">DECLARE</span> @ModuleID <span class="hljs-built_in">INT</span>;
    <span class="hljs-keyword">DECLARE</span> @NewMeetingDate <span class="hljs-built_in">DATE</span>;
    <span class="hljs-keyword">DECLARE</span> @StartDate <span class="hljs-built_in">DATE</span>;
    <span class="hljs-keyword">DECLARE</span> @EndDate <span class="hljs-built_in">DATE</span>;
	<span class="hljs-keyword">DECLARE</span> @OldMeetingDate <span class="hljs-built_in">DATE</span>;

    <span class="hljs-keyword">SELECT</span> 
        @ModuleID = m.ModuleID,
        @NewMeetingDate = i.Date,
		@OldMeetingDate = m.Date,
        @StartDate = mo.StartDate,
        @EndDate = mo.EndDate
    <span class="hljs-keyword">FROM</span> 
        inserted i
        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Modules mo <span class="hljs-keyword">ON</span> i.ModuleID = mo.ModuleID
        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Meetings m <span class="hljs-keyword">ON</span> i.ModuleID = m.ModuleID;

	IF @OldMeetingDate &gt; GETDATE()
		<span class="hljs-keyword">BEGIN</span>
			THROW <span class="hljs-number">50000</span>, <span class="hljs-string">'Nie można zmienić daty spotkania, ponieważ wydarzenie się już odbyło.'</span>, <span class="hljs-number">1</span>;
			<span class="hljs-keyword">ROLLBACK</span>;
		<span class="hljs-keyword">END</span>
    <span class="hljs-keyword">ELSE</span>
		<span class="hljs-keyword">BEGIN</span>
			<span class="hljs-keyword">IF</span> @NewMeetingDate &lt; @StartDate
			<span class="hljs-keyword">BEGIN</span>
				<span class="hljs-keyword">UPDATE</span> Modules
				<span class="hljs-keyword">SET</span> StartDate = @NewMeetingDate
				<span class="hljs-keyword">WHERE</span> ModuleID = @ModuleID;
			<span class="hljs-keyword">END</span>;

			IF @NewMeetingDate &gt; @EndDate
			<span class="hljs-keyword">BEGIN</span>
				<span class="hljs-keyword">UPDATE</span> Modules
				<span class="hljs-keyword">SET</span> EndDate = @NewMeetingDate
				<span class="hljs-keyword">WHERE</span> ModuleID = @ModuleID;
			<span class="hljs-keyword">END</span>;
		<span class="hljs-keyword">END</span>;
<span class="hljs-keyword">END</span>;

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Meetings] <span class="hljs-keyword">ENABLE</span> <span class="hljs-keyword">TRIGGER</span> [CheckAndUpdateModuleDates]
</div></code></pre>
<ol start="4">
<li>UpdateCourseStartDate</li>
</ol>
<p>Trigger sprawdza i aktualizuje datę rozpoczęcia kursu (StartDate) w tabeli Courses po zmianie daty rozpoczęcia modułu (NewStartDate) w tabeli Modules. Jeśli nowa data rozpoczęcia modułu jest późniejsza niż data zakończenia kursu, trigger zwraca błąd i blokuje transakcję, w przeciwnym razie aktualizuje datę rozpoczęcia kursu.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> [dbo].[UpdateCourseStartDate]
<span class="hljs-keyword">ON</span> [dbo].[Modules]
<span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">UPDATE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>;

    <span class="hljs-keyword">DECLARE</span> @CourseID <span class="hljs-built_in">INT</span>;
    <span class="hljs-keyword">DECLARE</span> @NewStartDate <span class="hljs-built_in">DATE</span>;
    <span class="hljs-keyword">DECLARE</span> @EndDate <span class="hljs-built_in">DATE</span>;

    <span class="hljs-keyword">SELECT</span> 
        @CourseID = i.CourseID,
        @NewStartDate = i.StartDate,
        @EndDate = i.EndDate
    <span class="hljs-keyword">FROM</span> 
        inserted i

    <span class="hljs-keyword">IF</span> @NewStartDate &gt; @EndDate
    <span class="hljs-keyword">BEGIN</span>
        THROW <span class="hljs-number">50000</span>, <span class="hljs-string">'Nowa data rozpoczęcia modułu nie może być późniejsza niż data zakończenia kursu.'</span>, <span class="hljs-number">1</span>;
        <span class="hljs-keyword">ROLLBACK</span>;
    <span class="hljs-keyword">END</span>
    <span class="hljs-keyword">ELSE</span>
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">UPDATE</span> Courses
        <span class="hljs-keyword">SET</span> StartDate = @NewStartDate
        <span class="hljs-keyword">WHERE</span> CourseID = @CourseID;
    <span class="hljs-keyword">END</span>;
<span class="hljs-keyword">END</span>;

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> [dbo].[Modules] <span class="hljs-keyword">ENABLE</span> <span class="hljs-keyword">TRIGGER</span> [UpdateCourseStartDate]
</div></code></pre>

</body>
</html>
